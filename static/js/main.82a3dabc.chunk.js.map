{"version":3,"sources":["gelato/lib/steps/python.js","gelato/lib/steps/conda.js","gelato/lib/util.js","gelato/lib/schema-validation-error.js","gelato/lib/schema-validator.js","gelato/lib/commands/version.js","gelato/lib/commands/from.js","gelato/lib/commands/env.js","gelato/lib/steps/conda-install.js","gelato/lib/steps/custom.js","gelato/lib/steps/git.js","gelato/lib/steps/index.js","gelato/lib/steps/hdfs.js","gelato/lib/commands/entrypoint.js","gelato/lib/index.js","gelato/lib/commands/shell.js","gelato/lib/commands/run.js","components/button.jsx","models.js","content/steps/index.js","settingsEditor/visitors.js","settingsEditor/validator.js","config-utils.js","title.jsx","settingsEditor/settings/choiceGroup.jsx","settingsEditor/settings/textField.jsx","settingsEditor/settings/tableEditor.jsx","settingsEditor/settings/tagGroup.jsx","settingsEditor/index.jsx","content/editStep.jsx","content/addStep.jsx","content/editGeneral.jsx","content/dockers/index.js","content/editDocker.jsx","content/editDockerfile.jsx","content/index.jsx","sidebar/sidebar.jsx","App.jsx","index.js"],"names":["__webpack_require__","r","__webpack_exports__","_","require","util","availableVersions","install","type","build","step","version","toString","config","includes","Error","concat","python","result","aptInstall","push","os","command","pip_install","pip","python3","requirements","isString","packages","isArray","join","module","exports","pythonVersion","python_version","condaVersion","conda_version","osType","bit","envName","env_name","writeBashrc","content","_len","arguments","length","Array","_key","appendToFile","file","SchemaValidationError","message","evalutionDetails","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","validationDetails","name","stepSchemas","conda_install","custom_command","git_clone","hdfs_download","install_conda","install_git","install_python","schemaValidator","validate","Ajv","addSchema","compile","configSchema","errors","from","base_docker","image_url","env","env_variables","entries","map","_ref","_ref2","slicedToArray","key","val","steps_conda_install","custom","git","clone","url","branch","isEmpty","tag","hdfs","download","isNil","apply","toConsumableArray","client_type","token","user","writeConfig","source_path","destination_path","steps_i","_steps","condaInstall","conda","commands","From","run_steps","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","value","builder","steps","step_type","err","return","x","entrypoint_steps","repeat","buildConfig","_i","_commands","Button","className","disabled","dark","mild","onClick","children","others","objectWithoutProperties","react","assign","style","userSelect","C","defaultProps","PropTypes","availableOSs","stepCommand","id","isRequired","invalid","baseStepSetting","general","shell","workdir","presetBase","stepToEdit","text","label","description","condition","textFieldSetting","objectSpread","regex","required","choiceOption","iconClass","choiceSetting","options","tableHeader","unique","tableSetting","headers","transform","tagGroupTag","tagList","tagGroupSetting","groupLabels","tags","stepSetting","availableBaseStep","configFinalize","defaultConfig","icon","availableSavedStep","author","baseType","createdAt","availableSteps","getStep","memoize","find","s","getStepSettings","foundAvailableStep","settingTransformDefinitions","field","setting","load","save","fromPairs","pair","_ref3","flatarray","defineProperty","settings","values","isStep","newValues","cloneDeep","forEach","equals","currVal","every","RegExp","test","filter","col","uniq","row","ex","visitConfigSettings","visitorfn","newConfig","Settings","_map","_map2","configPreSave","Visitors","array","item","Title","props","state","loading","fileInput","React","handleFiles","bind","assertThisInitialized","_this2","onUpdate","current","files","setState","reader","FileReader","onload","e","data","yaml","target","uuid","Alert","error","position","readAsText","_this3","_this$props","onReset","onSwitchContent","margin","components_button","click","ref","accept","display","onChange","blob","Blob","FileSaver","saveAs","gelato","ChoiceGroup","onPropChange","isAdd","putAdd","addSteps","arr","_this$props2","baseDockers","addValue","baseDocker","isShow","option","isShowStyleBool","DefaultButton","styles","rootPressed","color","backgroundColor","rootFocused","rootHovered","root","border","marginRight","marginBottom","fontWeight","TextFields","_inputMessage","onRef","console","log","t","errorMessage","red","Stack","width","TextField","underlined","dn","TableEditor","newVal","validateAndUpdate","splice","flatHeaders","gridTemplateColumns","idx","autoComplete","onRemoveRow","Icon","iconName","onAddRow","aria-hidden","ResultSymbol","TagGroup","getReverseLookup","memoizeOne","values2parts","getTagTree","tree","parts","cur","part","getOrDefaultChosen","previousParts","_this$getOrDefaultCho","slice","reduce","node","rawChosen","_this$props3","chosen","newChosen","i","_Object$keys","keys","_Object$keys2","_this$props4","_loop","choiceGroup","SettingsEditor","res","contents","textField_TextFields","tableEditor_TableEditor","tagGroup_TagGroup","bt","EditStep","onNameChange","submitChange","onConfigChange","configUpdate","editingStep","onSaveInfoChange","saveInfoUpdate","saveInfo","newSaveInfo","onLeaveSavingMode","saving","editingName","newStepList","newStep","findIndex","to","runSteps","entrypointSteps","stepListName","stepList","_updateStepList","_this$state","onSddSteps","baseStep","ml4","ba b--red","onBlur","settingsEditor_SettingsEditor","PrimaryButton","allowDisabledFocus","list","AddStep","selectedCard","editing","editingSavedStep","newSavedStep","onConfigSave","onEdit","_goBack","_addSteps","add","c","optional","shift","cardId","savedStep","filteredSteps","_this$props2$content","index","stopPropagation","ChevronUpMed","ChevronDownMed","editStep","filterSteps","renderBaseStepList","EditGeneral","generalUpdate","dockers","EditDocker","getPreset","base","p","onPresetUpdate","newBaseDocker","update","onCustomUpdate","dockerUpdate","pred","th","items","alert","_clicked","docker","a","_getButton","preset","split","pop","blue-custom","onPresetChosen","StatusCircleOuter","v-mid ml3 blue-custom","StatusCircleCheckmark","v-top nl2_9 ms-Icon white","pointer mr4 fr f7","v-top nl2_9 white","EditDockerfile","onCopy","switchColor","textArea","select","document","execCommand","onSave","createRef","react_default","createElement","height","maxHeight","spellCheck","Component","stepTypeTitle","add_run_step","add_entrypoint_step","edit_run_step","edit_entrypoint_step","edit_general","edit_docker","edit_dockerfile","button","savedSteps","isSwitchBool","innerHTML","Content","onRest","stepType","stepRunBool","stepEnBool","stepEditDockerBool","stepAddEnBool","stepAddRunBool","stepEditBool","stepEditRunBool","stepEditEnBool","stepEditDockerfileBool","sharedProps","iconProps","borderRadius","addStep","editGeneral_EditGeneral","editDocker","editDockerfile","none","right","165px","321px","bottom","Bar","selectedKey","addBool","switchType","_onLinkClick","k","n","cType","entrypointNewItems","ni","indexOf","querySelectorAll","title","generalName","Nav","initialSelectedKey","onLinkClick","chevronIcon","yellow","link","whiteSpace","lineHeight","groups","links","isExpanded","dummyConfig","App","localStorage","getItem","JSON","parse","warning","setItem","stringify","onclick","_this$state2","hasInvalid","validateConfig","newContent","_this$state3","_this$state4","dir","sidebar_sidebar","marginTop","textAlign","src_content","delFromDocker","react_s_alert_default","stack","limit","initializeIcons","render","src_App","getElementById"],"mappings":"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","file":"static/js/main.82a3dabc.chunk.js","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nconst _ = require('lodash')\nconst util = require('../util')\n\nconst availableVersions = [\n  '2',\n  '2.6',\n  '2.7',\n  '3',\n  '3.4',\n  '3.5',\n  '3.6',\n  '3.7'\n]\n\nfunction install (step) {\n  let version = _.toString(step.config.version) || '3.6'\n  if (!availableVersions.includes(version)) {\n    throw Error(`Invalid python version ${version}`)\n  }\n\n  if (version === '2') {\n    version = '2.7'\n  }\n\n  const python = `python${version}`\n  const result = [\n    util.aptInstall('wget', 'software-properties-common'),\n    'add-apt-repository ppa:deadsnakes/ppa',\n    'apt-get update',\n    util.aptInstall(python)\n  ]\n\n  if (version[0] === 3) {\n    result.push(\n      'wget -O ~/get-pip.py https://bootstrap.pypa.io/get-pip.py',\n      `${python} ~/get-pip.py`,\n      'pip install setuptools',\n      `ln -s /usr/bin/${python} /usr/local/bin/python`,\n      `ln -s /usr/bin/${python} /usr/local/bin/python3`\n    )\n  } else {\n    result.push(\n      'apt-get install -y --no-install-recommends python-pip',\n      'pip install setuptools',\n      `ln -s /usr/bin/${python} /usr/local/bin/python`\n    )\n  }\n\n  return result\n}\n\nfunction pipInstall (step) {\n  const pip = step.config.python3 ? 'pip3' : 'pip'\n  const result = [\n    `(${pip} -V || (echo \"Error: ${pip} is not installed\" && exit 1))`\n  ]\n  if (step.config.requirements && _.isString(step.config.requirements)) {\n    result.push(`${pip} install -r ${step.config.requirements}`)\n  }\n  if (step.config.packages && _.isArray(step.config.packages)) {\n    result.push(`${pip} install ${step.config.packages.join(' ')}`)\n  }\n  return result\n}\n\n// module.exports = {\n//   availableVersions,\n//   install: {\n//     type: 'install_python',\n//     build: install,\n//     os: ['ubuntu'],\n//     command: ['run']\n//   },\n//   pip_install: {\n//     type: 'pip_install',\n//     build: pipInstall,\n//     os: ['ubuntu'],\n//     command: ['run', 'entrypoint']\n//   }\n// }\nexport default {\n  availableVersions,\n  install: {\n    type: 'install_python',\n    build: install,\n    os: ['ubuntu'],\n    command: ['run']\n  },\n  pip_install: {\n    type: 'pip_install',\n    build: pipInstall,\n    os: ['ubuntu'],\n    command: ['run', 'entrypoint']\n  }\n}\n\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nconst availableVersions = require('./python').availableVersions\nconst util = require('../util')\n\nfunction buildInstallConda (step) {\n  let pythonVersion = step.config.python_version || '3.6'\n  if (!availableVersions.includes(pythonVersion)) {\n    throw Error(`Invalid python version ${pythonVersion}`)\n  }\n  const condaVersion = step.config.conda_version || 'latest'\n  const osType = step.config.bit === '64' ? 'Linux-x86_64' : 'Linux-x86'\n  const result = [util.aptInstall('curl', 'wget', 'gnupg', 'bzip2')]\n  const envName = step.config.env_name || 'docker'\n  result.push(\n    `wget --quiet https://repo.anaconda.com/miniconda/Miniconda3-${condaVersion}-${osType}.sh -O ~/miniconda.sh`,\n    '/bin/bash ~/miniconda.sh -b -p /opt/conda',\n    'rm ~/miniconda.sh',\n    util.writeBashrc('export PATH=/opt/conda/bin:$PATH'),\n    `conda create --yes -n ${envName} python=${step.config.python_version}`,\n    util.writeBashrc(`source activate ${envName}`),\n    util.writeBashrc(`export PATH=/opt/conda/envs/${envName}/bin:$PATH`)\n  )\n\n  return result\n}\n\nmodule.exports = {\n  type: 'install_conda',\n  build: buildInstallConda,\n  os: ['debian', 'ubuntu'],\n  command: ['run']\n}\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\n// module.exports = {\n//   writeBashrc: (content) => `echo \"${content}\" >> ~/.bashrc && source ~/.bashrc`,\n//   aptInstall: (...packages) => `apt-get install -y --no-install-recommends ${packages.join(' ')}`,\n//   appendToFile: (content, file) => `echo \"${content}\" >> ${file}`\n// }\n\nexport default {\n  writeBashrc: (content) => `echo \"${content}\" >> ~/.bashrc && source ~/.bashrc`,\n  aptInstall: (...packages) => `apt-get install -y --no-install-recommends ${packages.join(' ')}`,\n  appendToFile: (content, file) => `echo \"${content}\" >> ${file}`\n}","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nclass SchemaValidationError extends Error {\n  constructor (message, evalutionDetails) {\n    super(message)\n    this.message = message\n    this.validationDetails = evalutionDetails\n    this.name = 'SchemaValidation'\n  }\n}\n\n// module.exports = SchemaValidationError\n\nexport default SchemaValidationError;","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\n// const Ajv = require('ajv')\n// const configSchema = require('../schemas/config_schema.json')\n// const stepSchemas = [\n//   require('../schemas/conda_install.json'),\n//   require('../schemas/custom_command.json'),\n//   require('../schemas/git_clone.json'),\n//   require('../schemas/hdfs_download.json'),\n//   require('../schemas/install_conda.json'),\n//   require('../schemas/install_git.json'),\n//   require('../schemas/install_python.json'),\n//   require('../schemas/pip_install.json')\n// ]\n// const SchemaValidationError = require('./schema-validation-error')\n\nimport Ajv from 'ajv'\nimport configSchema from '../schemas/config_schema.json'\nimport conda_install from '../schemas/conda_install.json'\nimport custom_command from'../schemas/custom_command.json'\nimport git_clone from'../schemas/git_clone.json'\nimport hdfs_download from '../schemas/hdfs_download.json'\nimport install_conda from '../schemas/install_conda.json'\nimport install_git from '../schemas/install_git.json'\nimport install_python from '../schemas/install_python.json'\nimport pip_install from '../schemas/pip_install.json'\n\nconst stepSchemas = [\n  conda_install,\n  custom_command,\n  git_clone,\n  hdfs_download,\n  install_conda,\n  install_git,\n  install_python,\n  pip_install\n] \nimport SchemaValidationError from './schema-validation-error'\n\nfunction schemaValidator (config) {\n  const ajv = new Ajv()\n  const validate = ajv.addSchema(stepSchemas).compile(configSchema)\n  const valid = validate(config)\n  if (!valid) {\n    throw new SchemaValidationError(`The config validation is not passed.`, validate.errors)\n  }\n}\n\n// module.exports = schemaValidator\n\nexport default schemaValidator;\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nfunction buildVersion (config) {\n  if (!config.version) {\n    return []\n  }\n\n  return [`# version: ${config.version}`]\n}\n\n// module.exports = {\n//   type: 'version',\n//   build: buildVersion\n// }\nexport default {\n  type: 'version',\n  build: buildVersion\n}","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nfunction buildBase (config) {\n  if (!config.base_docker) {\n    throw new Error('No base docker in config file.')\n  }\n\n  return [`From ${config.base_docker.image_url}`]\n}\n\n// module.exports = {\n//   type: 'base_docker',\n//   build: buildBase\n// }\n\nexport default {\n  type: 'base_docker',\n  build: buildBase\n}","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nfunction buildEnv (config) {\n  if (!config.env_variables) {\n    return []\n  }\n\n  return Object.entries(config.env_variables).map(\n    ([key, val]) => `ENV ${key}=\"${val}\"`\n  )\n}\n\nexport default {\n  type: 'env_variables',\n  build: buildEnv\n}\n\n// module.exports = {\n//   type: 'env_variables',\n//   build: buildEnv\n// }\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nfunction buildCondaInstall (step) {\n  const packages = step.config.packages\n  return packages ? \n    [`conda install ${packages.join(' ')}`] :\n    [`conda install`] \n}\n\n// module.exports = {\n//   type: 'conda_install',\n//   build: buildCondaInstall,\n//   os: ['debian', 'ubuntu'],\n//   command: ['run', 'entrypoint']\n// }\nexport default {\n  type: 'conda_install',\n  build: buildCondaInstall,\n  os: ['debian', 'ubuntu'],\n  command: ['run', 'entrypoint']\n}","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nfunction build (step) {\n  return [step.config.command]\n}\n\n// module.exports = {\n//   type: 'custom_command',\n//   build,\n//   os: ['debian', 'ubuntu'],\n//   command: ['run', 'entrypoint']\n// }\nexport default {\n  type: 'custom_command',\n  build,\n  os: ['debian', 'ubuntu'],\n  command: ['run', 'entrypoint']\n}\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nconst _ = require('lodash')\n\nfunction install (step) {\n  return [\n    'apt-get install -y --no-install-recommends git'\n  ]\n}\n\nfunction clone (step) {\n  let result = install(step)\n\n  // clone\n  result.push(`git clone ${step.config.url}`)\n\n  // do not cd !\n  // const repoNameReg = /\\/([\\w.@:-~_]+?)(\\/)?(\\.git)?$/\n  // const repoName = repoNameReg.exec(step.config.url)[1]\n  // result.push(`cd ${repoName}`)\n\n  // branch\n  if (step.config.branch !== 'master') {\n    result.push(`git checkout ${step.config.branch}`)\n  }\n\n  // tag\n  if (!_.isEmpty(step.config.tag)) {\n    result.push(`git checkout tags/${step.config.tag}`)\n  }\n\n  return result\n}\n\n// module.exports = {\n//   clone: {\n//     type: 'git_clone',\n//     build: clone,\n//     os: ['debian', 'ubuntu'],\n//     command: ['run', 'entrypoint']\n//   },\n//   install: {\n//     type: 'install_git',\n//     build: install,\n//     os: ['debian', 'ubuntu'],\n//     command: ['run']\n//   }\n// }\nexport default {\n  clone: {\n    type: 'git_clone',\n    build: clone,\n    os: ['debian', 'ubuntu'],\n    command: ['run', 'entrypoint']\n  },\n  install: {\n    type: 'install_git',\n    build: install,\n    os: ['debian', 'ubuntu'],\n    command: ['run']\n  }\n}\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\n// const steps = [\n//   require('./conda-install'),\n//   require('./custom'),\n//   require('./git').clone,\n//   require('./git').install,\n//   require('./conda'),\n//   require('./python').install,\n//   require('./python').pip_install,\n//   require('./hdfs').download\n// ]\n  import condaInstall from './conda-install'\n  import custom from './custom'\n  import git from './git'\n  import conda from './conda'\n  import python from './python'\n  import hdfs from './hdfs'\n\nconst steps = [\n  condaInstall,\n  custom,\n  git.clone,\n  git.install,\n  conda,\n  python.install,\n  python.pip_install,\n  hdfs.download\n]\n\nconst result = {}\n\nfor (const step of steps) {\n  if (result[step.type]) {\n    throw Error(`Step ID ${step.type} is not unique.`)\n  }\n\n  result[step.type] = step\n}\n\n// module.exports = result\nexport default result;","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\n// const _ = require('lodash')\n// const util = require('../util')\nimport _ from 'lodash'\nimport util from '../util'\n\nfunction writeConfig (step) {\n  const result = []\n  const hdfsConfigFile = '~/.hdfscli.cfg'\n  result.push(\n    util.appendToFile('[global]', hdfsConfigFile),\n    util.appendToFile('default.alias = dev', hdfsConfigFile),\n    util.appendToFile('[dev.alias]', hdfsConfigFile)\n  )\n  if (step.config.client_type === 'TokenClient') {\n    if (_.isNil(step.config.token)) {\n      throw new Error(`step type ${step.type}: token client does not have token`)\n    }\n    result.push(\n      util.appendToFile('client = TokenClient', hdfsConfigFile),\n      util.appendToFile(`url = ${step.config.url}`, hdfsConfigFile),\n      util.appendToFile(`token = ${step.config.token}`, hdfsConfigFile)\n    )\n  } else {\n    result.push(\n      util.appendToFile('client = InsecureClient', hdfsConfigFile),\n      util.appendToFile(`url = ${step.config.url}`, hdfsConfigFile),\n      _.isNil(step.config.user) ? null : util.appendToFile(`user = ${step.config.user}`, hdfsConfigFile)\n    )\n  }\n\n  return result\n}\n\nfunction download (step) {\n  if (_.isNil(step.config.url)) {\n    throw new Error(`step type ${step.type}: hdfs does not have url`)\n  }\n  const result = [\n    `(pip -V || (echo \"Error: pip is not installed\" && exit 1))`,\n    'pip install hdfs'\n  ]\n  result.push(...writeConfig(step))\n  result.push(\n    `hdfscli download ${step.config.source_path} ${step.config.destination_path}`\n  )\n\n  return result\n}\n\nexport default {\n  download: {\n    type: 'hdfs_download',\n    build: download,\n    os: ['ubuntu'],\n    command: ['entrypoint']\n  }\n}\n// module.exports = {\n//   download: {\n//     type: 'hdfs_download',\n//     build: download,\n//     os: ['ubuntu'],\n//     command: ['entrypoint']\n//   }\n// }\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\n// const _ = require('lodash')\n\nimport _ from 'lodash'\n\n// const steps = require('../steps')\n\nimport steps from '../steps'\n\nfunction buildSteps (config) {\n  if (_.isEmpty(config.entrypoint_steps)) {\n    return []\n  }\n\n  const result = []\n\n  for (const step of config.entrypoint_steps) {\n    const builder = steps[step.step_type]\n    if (_.isNil(builder)) {\n      throw Error(`cannot find step builder: '${step.type}'`)\n    }\n    if (!builder.command.includes('entrypoint')) {\n      throw Error(`Step ${step.type} doesn't support ENTRYPOINT`)\n    }\n    if (!builder.os.includes(config.base_docker.os)) {\n      throw Error(`Step ${step.type} doesn't support ${config.base_docker.os} OS`)\n    }\n    result.push(...builder.build(step))\n  }\n\n  return [`ENTRYPOINT ${result.join(` && \\\\ \\n${' '.repeat(11)}`)}`]\n}\n\nexport default {\n  type: 'entrypoint_steps',\n  build: buildSteps\n}\n// module.exports = {\n//   type: 'entrypoint_steps',\n//   build: buildSteps\n// }\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\n// const schemaValidator = require('./schema-validator')\nimport schemaValidator from './schema-validator'\nimport version from './commands/version'\nimport  From from './commands/from'\nimport shell from './commands/shell'\nimport env from './commands/env'\nimport run from './commands/run'\nimport entrypoint from './commands/entrypoint'\n\n// const commands = [\n\n//   require('./commands/version'),\n//   require('./commands/from'),\n//   require('./commands/shell'),\n//   require('./commands/env'),\n//   require('./commands/run'),\n//   require('./commands/entrypoint')\n// ]\nconst commands = [\n  version,\n  From,\n  shell,\n  env,\n  run,\n  entrypoint\n]\n\nfunction buildConfig (config) {\n  schemaValidator(config)\n  const result = ['']\n  for (const builder of commands) {\n    result.push(...builder.build(config))\n    result.push('')\n  }\n  return result.join('\\n')\n}\n\n// module.exports = buildConfig\nexport default buildConfig;\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\n// module.exports = {\n//   type: 'shell',\n//   build: (config) => ['SHELL [\"/bin/bash\", \"-c\"]', 'ENV BASH_ENV=~/.bashrc']\n// }\nexport default {\n  type: 'shell',\n  build: (config) => ['SHELL [\"/bin/bash\", \"-c\"]', 'ENV BASH_ENV=~/.bashrc']\n}","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\n// const _ = require('lodash')\n// const util = require('../util')\n// const steps = require('../steps')\n\nimport _ from 'lodash'\nimport util from '../util'\nimport steps from '../steps'\n\nfunction buildSteps (config) {\n  if (_.isEmpty(config.run_steps)) {\n    return []\n  }\n\n  const result = [\n    'apt-get update',\n    util.aptInstall('apt-utils'),\n    'touch ~/.bashrc',\n    'mv ~/.bashrc ~/.bashrc.bak' // backup original bashrc to make user create new bashrc\n  ]\n\n  for (const step of config.run_steps) {\n    const builder = steps[step.step_type]\n    if (_.isNil(builder)) {\n      throw Error(`cannot find step builder: '${step.type}'`)\n    }\n    if (!builder.command.includes('run')) {\n      throw Error(`Step ${step.type} doesn't support RUN`)\n    }\n    if (!builder.os.includes(config.base_docker.os)) {\n      throw Error(`Step ${step.type} doesn't support ${config.base_docker.os} OS`)\n    }\n    result.push(...builder.build(step))\n  }\n  // append original bashrc to the end\n  result.push('cat ~/.bashrc.bak >> ~/.bashrc')\n\n  return result.map((x) => `RUN ${x}`)\n  // return [`RUN ${result.join(` && \\\\ \\n${' '.repeat(4)}`)}`]\n}\n\n// module.exports = {\n//   type: 'run_steps',\n//   build: buildSteps\n// }\n\nexport default {\n  type: 'run_steps',\n  build: buildSteps\n}","import * as PropTypes from 'prop-types';\nimport * as React from 'react';\nimport C from 'classnames';\n\nconst Button = ({\n  className, dark, mild, disabled, onClick, children, ...others\n}) => (\n  disabled\n    ? (\n      <span\n        className={`pa2 c-st ${className}`}\n        style={{ userSelect: 'none' }}\n        {...others}\n      >\n        {children}\n      </span>\n    )\n    : (\n      <span\n        className={C('pa2 pl0 pointer ', className)}\n        style={{ userSelect: 'none' }}\n        onClick={onClick}\n        {...others}\n      >\n        {children}\n      </span>\n    )\n);\n\nButton.propTypes = {\n  disabled: PropTypes.bool,\n  dark: PropTypes.bool,\n  mild: PropTypes.bool,\n  onClick: PropTypes.func,\n  className: PropTypes.string,\n};\n\nButton.defaultProps = {\n  dark: false,\n  mild: false,\n  className: '',\n  disabled: false,\n  onClick: null,\n};\n\nexport default Button;\n","import * as PropTypes from 'prop-types';\nimport { availableOSs } from './content/settings';\n\nexport const os = PropTypes.oneOf(availableOSs);\nexport const stepCommand = PropTypes.oneOf(['run', 'entrypoint']);\n\nexport const step = PropTypes.shape({\n  id: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n  invalid: PropTypes.bool,\n  config: PropTypes.object,\n});\n\nexport const config = PropTypes.shape({\n  version: PropTypes.string.isRequired,\n  general: PropTypes.shape({\n    name: PropTypes.string,\n    shell: PropTypes.string,\n    workdir: PropTypes.string,\n    env_variables: PropTypes.arrayOf(PropTypes.shape({\n      key: PropTypes.string,\n      value: PropTypes.string,\n    })).isRequired,\n    invalid: PropTypes.bool,\n  }),\n  base_docker: PropTypes.shape({\n    image_url: PropTypes.string,\n    os,\n    custom: PropTypes.bool,\n    presetBase: PropTypes.string,\n    invalid: PropTypes.bool,\n  }).isRequired,\n  run_steps: PropTypes.arrayOf(step).isRequired,\n  entrypoint_steps: PropTypes.arrayOf(step).isRequired,\n  invalid: PropTypes.bool,\n});\n\nexport const content = PropTypes.shape({\n  type: PropTypes.oneOf([\n    'add_run_step',\n    'add_entrypoint_step',\n    'edit_run_step',\n    'edit_entrypoint_step',\n    'edit_general',\n    'edit_docker',\n    'edit_dockerfile',\n  ]).isRequired,\n  stepToEdit: step,\n  text: PropTypes.string,\n});\n\nexport const baseStepSetting = {\n  label: PropTypes.node,\n  name: PropTypes.string.isRequired,\n  description: PropTypes.node,\n  condition: PropTypes.object,\n};\n\nexport const textFieldSetting = PropTypes.shape({\n  ...baseStepSetting,\n  type: PropTypes.oneOf(['text']).isRequired,\n  regex: PropTypes.string,\n  required: PropTypes.bool,\n  disabled: PropTypes.bool,\n});\n\nexport const choiceOption = PropTypes.shape({\n  iconClass: PropTypes.string,\n  name: PropTypes.string.isRequired,\n});\n\nexport const choiceSetting = PropTypes.shape({\n  ...baseStepSetting,\n  type: PropTypes.oneOf(['choice']).isRequired,\n  options: PropTypes.arrayOf(choiceOption).isRequired,\n});\n\nexport const tableHeader = PropTypes.oneOfType([\n  PropTypes.string,\n  PropTypes.shape({\n    name: PropTypes.string.isRequired,\n    unique: PropTypes.bool,\n  }),\n]);\n\nexport const tableSetting = PropTypes.shape({\n  ...baseStepSetting,\n  type: PropTypes.oneOf(['table']).isRequired,\n  headers: PropTypes.arrayOf(tableHeader).isRequired,\n  transform: PropTypes.oneOf(['field', 'flatarray']),\n});\n\nexport const tagGroupTag = PropTypes.shape({\n  tagList: PropTypes.arrayOf(PropTypes.string).isRequired,\n  name: PropTypes.string.isRequired,\n});\n\nexport const tagGroupSetting = PropTypes.shape({\n  ...baseStepSetting,\n  type: PropTypes.oneOf(['tag-group']).isRequired,\n  groupLabels: PropTypes.arrayOf(PropTypes.node).isRequired,\n  tags: PropTypes.arrayOf(tagGroupTag).isRequired,\n});\n\nexport const stepSetting = PropTypes.oneOfType([\n  textFieldSetting,\n  choiceSetting,\n  tableSetting,\n  tagGroupSetting,\n]);\n\nexport const availableBaseStep = PropTypes.shape({\n  name: PropTypes.string.isRequired,\n  description: PropTypes.string,\n  type: PropTypes.string.isRequired,\n  command: PropTypes.arrayOf(stepCommand).isRequired,\n  os: PropTypes.arrayOf(os).isRequired,\n  config: PropTypes.arrayOf(stepSetting),\n  configFinalize: PropTypes.func,\n  defaultConfig: PropTypes.object,\n  icon: PropTypes.string,\n});\n\nexport const availableSavedStep = PropTypes.shape({\n  id: PropTypes.number.isRequired,\n  name: PropTypes.string.isRequired,\n  author: PropTypes.string.isRequired,\n  baseType: PropTypes.string.isRequired,\n  createdAt: PropTypes.string.isRequired,\n  defaultConfig: PropTypes.object.isRequired,\n});\n\nexport const savedSteps = PropTypes.arrayOf(availableSavedStep);\n\nexport const availableStep = PropTypes.oneOf([\n  availableBaseStep,\n  availableSavedStep,\n]);\n","import { memoize } from 'lodash';\n\nimport condaInstall from './conda_install.json';\nimport installGit from './install_git.json';\nimport gitClone from './git_clone.json';\nimport installConda from './install_conda.json';\nimport installPython from './install_python.json';\nimport hdfsDownload from './hdfs_download.json';\nimport customCommand from './custom_command.json';\n\nexport const availableSteps = [\n  condaInstall,\n  installGit,\n  gitClone,\n  installConda,\n  installPython,\n  hdfsDownload,\n  customCommand,\n];\n\nexport function filterSteps(command, os) {\n  return availableSteps.filter(s => s.command.includes(command) && s.os.includes(os));\n}\n\nexport const getStep = memoize(type => availableSteps.find(s => s.type === type));\n\nexport const getStepSettings = memoize((type) => {\n  const foundAvailableStep = getStep(type);\n  if (!foundAvailableStep) {\n    throw new Error(`Missing step prototype for ${type}`);\n  }\n  return foundAvailableStep.config;\n});\n","import { cloneDeep, fromPairs } from 'lodash';\n\nconst settingTransformDefinitions = {\n  field: {\n    condition: (value, setting) => setting.type === 'table' && setting.headers.length === 2,\n    load: value => Object.entries(value).map(([key, val]) => ({ key, value: val })),\n    save: (value, setting) => fromPairs(\n      value.map(pair => setting.headers.map(({ name }) => pair[name])),\n    ),\n  },\n  flatarray: {\n    condition: (value, setting) => setting.type === 'table' && setting.headers.length === 1,\n    load: (value, setting) => value.map(val => ({ [setting.headers[0].name]: val })),\n    save: (value, setting) => value.map(val => val[setting.headers[0].name]),\n  },\n};\n\nexport const save = (settings, values, isStep) => {\n  const newValues = cloneDeep(values);\n  settings.forEach((setting) => {\n    if (setting.condition\n      && (isStep ? values.config : values)[setting.condition.name] !== setting.condition.equals) {\n      delete (isStep ? newValues.config : newValues)[setting.name];\n      return;\n    }\n    const transform = setting.transform && settingTransformDefinitions[setting.transform];\n    const currVal = isStep ? values.config[setting.name] : values[setting.name];\n    if (currVal !== undefined && transform && transform.condition(currVal, setting)) {\n      (isStep ? newValues.config : newValues)[setting.name] = transform.save(currVal, setting);\n    }\n  });\n  return newValues;\n};\n\nexport const load = (settings, values, isStep) => {\n  const newValues = cloneDeep(values);\n  settings.forEach((setting) => {\n    const transform = setting.transform && settingTransformDefinitions[setting.transform];\n    const currVal = isStep ? values.config[setting.name] : values[setting.name];\n    if (currVal !== undefined && transform && transform.condition(currVal, setting)) {\n      (isStep ? newValues.config : newValues)[setting.name] = transform.load(currVal, setting);\n    }\n  });\n  return newValues;\n};\n","import { uniq } from 'lodash';\n\nexport default function validate(settings, value) {\n  try {\n    if (Array.isArray(settings)) {\n      return settings.every((s) => {\n        if (s.condition && value[s.condition.name] !== s.condition.equals) {\n          return true;\n        }\n        return validate(s, value[s.name]);\n      });\n    }\n\n    if (settings.type === 'text') {\n      const { regex, required } = settings;\n      return (!required || value) && (!regex || new RegExp(regex).test(value));\n    }\n\n    if (settings.type === 'table') {\n      const { headers } = settings;\n      const uniqueColumns = headers.filter(\n        x => typeof x === 'object' && x.unique,\n      ).map(\n        x => x.name,\n      );\n      return uniqueColumns.every(\n        col => uniq(value.map(row => row[col])).length === value.length,\n      );\n    }\n    return true;\n  } catch (ex) {\n    return false;\n  }\n}\n","/* eslint-disable no-param-reassign */\nimport uuid from 'uuid';\nimport { getStepSettings } from './content/steps';\nimport * as Settings from './content/settings';\nimport * as Visitors from './settingsEditor/visitors';\nimport validate from './settingsEditor/validator';\n\n// visitorfn(settings, values, [isStep])\nexport function visitConfigSettings(config, visitorfn) {\n  const newConfig = {\n    version: config.version,\n  };\n  newConfig.general = visitorfn(Settings.general, config.general);\n  newConfig.base_docker = visitorfn(Settings.docker, config.base_docker);\n  [newConfig.run_steps, newConfig.entrypoint_steps] = [config.run_steps, config.entrypoint_steps]\n    .map(steps => steps\n      .map(step => visitorfn(getStepSettings(step.type), step, true)));\n  return newConfig;\n}\n\nexport function validateConfig(config, content) {\n  let hasInvalid = false;\n  const { type } = content\n  const newConfig = visitConfigSettings(\n    config,\n    (settings, values, isStep) => {\n      const invalid = isStep\n        ? !validate(settings, values.config) || !values.name\n        : !validate(settings, values);\n      hasInvalid = hasInvalid || invalid;\n      return { ...values, invalid };\n    },\n  );\n  // if (hasInvalid) {\n  //   newConfig.invalid = true;\n  // }\n  return newConfig;\n}\n\nexport function configPreSave(config) {\n  const newConfig = visitConfigSettings(config, Visitors.save);\n  [newConfig.run_steps, newConfig.entrypoint_steps]\n    .forEach(array => array.forEach((item) => {\n      item.step_type = item.type;\n      delete item.type;\n      delete item.id;\n    }));\n  Object.assign(newConfig, newConfig.general);\n  delete newConfig.general;\n  return newConfig;\n}\n\nexport function configPostLoad(config) {\n  config.general = {};\n  ['name', 'shell', 'env_variables', 'workdir'].forEach((key) => {\n    config.general[key] = config[key];\n    delete config[key];\n  });\n  [config.run_steps, config.entrypoint_steps].forEach(array => array.forEach((item) => {\n    item.id = uuid();\n    item.type = item.step_type;\n    delete item.step_type;\n  }));\n  const newConfig = visitConfigSettings(config, Visitors.load);\n  return newConfig;\n}\n","import Alert from 'react-s-alert';\nimport FileSaver from 'file-saver';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\nimport * as yaml from 'js-yaml';\n\nimport gelato from './gelato/lib/index';\nimport Button from './components/button';\nimport * as Models from './models';\nimport { configPostLoad, configPreSave } from './config-utils';\n\nexport default class Title extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: false,\n    };\n    this.fileInput = React.createRef();\n    this.handleFiles = this.handleFiles.bind(this);\n  }\n\n  handleFiles() {\n    const { onUpdate } = this.props;\n    const file = this.fileInput.current.files[0];\n    if (file) {\n      this.setState({\n        loading: true,\n      });\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        try {\n          const data = yaml.safeLoad(e.target.result);\n          // TODO: validation\n          onUpdate(configPostLoad(data));\n        } catch (ex) {\n          Alert.error(`The imported file is invalid: ${ex}`, { position: 'bottom-right' });\n        }\n        this.fileInput.current.value = null;\n        this.setState({\n          loading: false,\n        });\n      };\n      reader.readAsText(file);\n    }\n  }\n\n  render() {\n    const {\n      config, onReset, onSwitchContent, invalid,\n    } = this.props;\n    const { loading } = this.state;\n    return (\n      <div className=\"f3  h3 bg-white\">\n        <div className=\"pa3 flex justify-between items-center mw9\" style={{ margin: '0 auto' }}>\n          <div>Project Title</div>\n          <div className=\"f5\">\n            <Button\n              dark\n              onClick={onReset}\n              disabled={loading}\n            >\n              Reset\n            </Button>\n            <Button\n              dark\n              onClick={() => { this.fileInput.current.click(); }}\n              disabled={loading}\n            >\n              Import Config\n            </Button>\n            <input\n              ref={this.fileInput}\n              type=\"file\"\n              accept=\"text/x-yaml|application/json\"\n              style={{ display: 'none' }}\n              onChange={this.handleFiles}\n            />\n            <Button\n              dark\n              onClick={() => {\n                const blob = new Blob([yaml.safeDump(configPreSave(config))], { type: 'text/x-yaml' });\n                FileSaver.saveAs(blob, `${config.general.name}.yaml`);\n              }}\n            >\n              Export Config\n            </Button>\n            <Button\n              dark\n              className=\"dn\"\n              disabled={invalid}\n              onClick={() => {\n                try {\n                  onSwitchContent({\n                    type: 'edit_dockerfile',\n                    text: gelato(configPreSave(config)),\n                  });\n                } catch (ex) {\n                  Alert.error(`An error occured while generating Dockerfile: ${ex}`, { position: 'bottom-right' });\n                }\n              }}\n            >\n              Generate Dockerfile\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nTitle.propTypes = {\n  config: Models.config.isRequired,\n  onUpdate: PropTypes.func.isRequired,\n  onReset: PropTypes.func.isRequired,\n  onSwitchContent: PropTypes.func.isRequired,\n  invalid: PropTypes.bool,\n};\n\nTitle.defaultProps = {\n  invalid: false,\n};\n","import * as PropTypes from 'prop-types';\nimport * as React from 'react';\nimport { DefaultButton } from 'office-ui-fabric-react'\n\nimport * as models from '../../models';\n\nclass ChoiceGroup extends React.Component {\n  componentDidMount() {\n    this.onPropChange();\n  }\n\n  componentDidUpdate() {\n    this.onPropChange();\n  }\n\n  onPropChange() {\n    const { onUpdate, options, value, isAdd, putAdd, addSteps} = this.props;\n    if(isAdd) {\n      addSteps(value,'addValue')\n      putAdd()\n    }\n    if (!options || !options.length) {\n      throw new Error('invalid options');\n    }\n    if (!value || !options.find(x => x.name === value)) {\n      onUpdate(options[0].name);\n    }\n  }\n\n  render() {\n    const {\n      label, options, onUpdate, disabled, baseDockers, addValue, baseDocker\n    } = this.props;\n    const isShow = baseDocker && baseDockers.baseDocker ?\n      baseDocker.presetBase === baseDockers.baseDocker.presetBase : baseDockers && baseDockers.baseDocker ?\n      baseDockers.baseDocker.custom || false: false\n    let arr  \n    if(addValue && addValue.length > 0){\n       arr = addValue.filter(e=> e)\n    }\n    return (\n      <>\n        <div>{label}</div>\n        <div className=\"pt2 pl0\">\n          {options.map((option)=> {\n            const isShowStyleBool = arr ? arr.find(e=> e=== option.name) === option.name : ''\n              return(\n                  <DefaultButton\n                    text={option.name}\n                    key={option.name}\n                    styles={{\n                      rootPressed: {\n                        color:arr && isShow? isShowStyleBool ?'white': '':'',\n                        backgroundColor: arr && isShow? isShowStyleBool ?'#0078D4':'#C8C8C8':'#C8C8C8'},\n                      rootFocused: {backgroundColor: arr && isShow? isShowStyleBool ?'#0078D4':'#C8C8C8':'#C8C8C8'},\n                      rootHovered: {\n                        color:arr && isShow? isShowStyleBool ?'white': '':'',\n                        backgroundColor:arr && isShow? isShowStyleBool ?'#0078D4': '#F4F4F4':''},\n                      root: {border:'none', marginRight:'8px', marginBottom:'8px',fontWeight: 300, \n                      color:arr && isShow? isShowStyleBool ? 'white': '':'',\n                      backgroundColor: arr && isShow? isShowStyleBool ?'#0078D4': '#F4F4F4':'#F4F4F4'\n                    }}}\n                    onClick={disabled ? null : (() => onUpdate(option.name))}\n                  />\n              )\n            })}\n        </div>\n      </>\n    );\n  }\n}\n\nChoiceGroup.propTypes = {\n  label: PropTypes.node.isRequired,\n  options: PropTypes.arrayOf(models.choiceOption).isRequired,\n  onUpdate: PropTypes.func.isRequired,\n  value: PropTypes.string,\n  disabled: PropTypes.bool,\n};\n\nChoiceGroup.defaultProps = {\n  value: '',\n  disabled: false,\n};\n\nexport default ChoiceGroup;\n","import * as PropTypes from 'prop-types';\nimport * as React from 'react';\nimport C from 'classnames';\nimport { TextField } from 'office-ui-fabric-react/lib/TextField';\nimport { Stack, IStackProps } from 'office-ui-fabric-react/lib/Stack';\n\nexport default class TextFields extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      invalid: !props.validate(props.value),\n    };\n    this.onChange = this.onChange.bind(this);\n  }\n  componentDidMount() {\n    const { onRef } = this.props\n    if(onRef) onRef(this.item)\n    if(this.item) this.setState({ invalid: false })\n  }\n  componentWillUpdate() {\n    const { onRef } = this.props\n    if(onRef) onRef(this.item)\n  }\n  onChange(values) {\n    const { onUpdate, validate } = this.props;\n    const value = values ? values : ''\n    this.item = value\n    console.log(validate(value));\n    if (validate(value)) {\n      this.setState({ invalid: false });\n    } else {\n      this.setState({ invalid: true });\n    }\n    onUpdate(value);\n  }\n  _inputMessage = (e)=> {\n    const value = e.target.value\n    this.onChange(value)\n  }\n  render() {\n    const { invalid } = this.state;\n    // const errorMessage = invalid ? 'docker should not be empty' : ''\n    const { value, label, disabled, t, image_url } = this.props;\n    const errorMessage = invalid ? `Please Enter ${label}` : ''\n    this.item = label === 'Base Docker URL' ? image_url || this.item: value\n    return (\n      <>\n        <div className={C({ red: invalid})} className={t ==='add_run_step' || t === 'add_entrypoint_step' ? 'mb0':'mb3'}>{label}</div>\n        {\n          !disabled \n            ? (\n                <Stack styles= {{ root: { width: 260 } }}>\n                  <TextField className={C({'dn':t==='add_run_step' || t=== 'add_entrypoint_step'})} \n                    errorMessage={errorMessage}\n                    onChange ={this._inputMessage} \n                    value={this.item}  \n                    // required placeholder=\"Enter text here\" \n                    label=\"Required:\"\n                    underlined \n                  />\n                </Stack>\n            )\n            : (\n                <Stack styles= {{ root: { width: 260 } }}>\n                  <TextField label=\"Disabled:\" underlined disabled value={value} />\n                </Stack>\n            )\n        }\n      </>\n    );\n  }\n}\n\nTextFields.propTypes = {\n  label: PropTypes.node.isRequired,\n  value: PropTypes.string,\n  onUpdate: PropTypes.func.isRequired,\n  disabled: PropTypes.bool,\n  validate: PropTypes.func.isRequired,\n};\n\nTextFields.defaultProps = {\n  value: '',\n  disabled: false,\n};\n{/*<input*/}\n{/*    style={{ border: 0, outline: 0, borderBottom: '1px solid' }}*/}\n{/*    className={C({ 'bb b-red': invalid }, 'pb1 w-20 nb3-ns black-70')}*/}\n{/*    value={value}*/}\n{/*    onChange={this.onChange}*/}\n{/*/>*/}\n{/*<input*/}\n{/*    style={{ border: 0, outline: 0, backgroundColor: 'white', borderBottom: '2px solid #4EA1E1' }}*/}\n{/*    className='w-20 nb4-ns black-70'*/}\n{/*    disabled*/}\n{/*    value={value}*/}\n{/*/>*/}\n","import C from 'classnames';\nimport { cloneDeep } from 'lodash';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\nimport { TextField } from 'office-ui-fabric-react/lib/TextField';\nimport { Icon } from 'office-ui-fabric-react/lib/Icon';\nimport * as models from '../../models';\nimport Button from '../../components/button';\n\nexport default class TableEditor extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      invalid: !props.validate(props.value),\n    };\n  }\n  \n  onChange(row, col, val) {\n    const { value } = this.props;\n    const newVal = cloneDeep(value);\n    newVal[row][col] = val;\n    this.validateAndUpdate(newVal);\n  }\n\n  onAddRow() {\n    const { value } = this.props;\n    const newVal = cloneDeep(value);\n    newVal.push({});\n    this.validateAndUpdate(newVal);\n  }\n\n  onRemoveRow(row) {\n    const { value } = this.props;\n    const newVal = cloneDeep(value);\n    newVal.splice(row, 1);\n    this.validateAndUpdate(newVal);\n  }\n\n  validateAndUpdate(newVal) {\n    const { onUpdate, validate } = this.props;\n    if (validate(newVal)) {\n      this.setState({ invalid: false });\n    } else {\n      this.setState({ invalid: true });\n    }\n    onUpdate(newVal);\n  }\n  \n  render() {\n    const { invalid } = this.state;\n    const {\n      label, value, headers, disabled, t\n    } = this.props;\n    const flatHeaders = headers.map(x => (\n      typeof x === 'object' ? x.name : x\n    ));\n\n    return (\n      <>\n        <div className={C({ red: invalid })}>\n          {label}\n        </div>\n        <div\n          style={{\n            display: 'grid',\n            gridTemplateColumns: `repeat(${flatHeaders.length}, auto) min-content`,\n          }}\n          className=\"mt2 w-50\"\n        >\n          {flatHeaders.map((x => (\n            <div key={`header-${x}`} className=\"pb2\">\n              {x}\n            </div>\n          )))}\n          <div />\n          {value.map((row, idx) => (\n            // eslint-disable-next-line react/no-array-index-key\n            <React.Fragment key={idx}>\n              {flatHeaders.map(col => {\n                return(\n                  <div key={col + idx}>\n                    <TextField\n                      key={col + idx}\n                      autoComplete='off'\n                      value={row[col]}\n                      className={col === 'Package' ? \"mb3 w-95\" : \"mb3 w-90\"}\n                      type=\"text\"\n                      onChange={e => this.onChange(idx, col, e.target.value)}\n                      disabled={disabled}\n                      label=\"\" \n                      // placeholder={`Please enter ${}`}\n                    />\n                </div>\n                // <input\n                  // eslint-disable-next-line react/no-array-index-key\n                //   key={col + idx}\n                //   style={ col === 'Package' ? {border: 0, outline: 0, backgroundColor: 'white', borderBottom: '2px solid #4EA1E1'}: {} }\n                //   className={col === 'Package' ? \"ph1 mb3 pv1 w-95 black-50\" : \"ph1 mb3 pv1 w-90 black-50\" }\n                //   value={row[col] || ''}\n                //   type=\"text\"\n                //   onChange={e => this.onChange(idx, col, e.target.value)}\n                //   disabled={disabled}\n                // />\n              )})}\n              <Button\n                // eslint-disable-next-line react/no-array-index-key\n                key={idx}\n                className='ml-1'\n                onClick={() => this.onRemoveRow(idx)}\n                disabled={disabled}\n              >\n                <Icon iconName='Cancel' />\n              </Button>\n            </React.Fragment>\n          ))}\n        </div>\n        <div className={C({'dn':t ===\"add_run_step\" || t === \"add_entrypoint_step\"},'w-20')}>\n          <Button className='flex' onClick={() => this.onAddRow()} disabled={disabled}>\n            <Icon iconName='CircleAddition' className='f5 mr1' aria-hidden=\"true\"/>Add items\n          </Button>\n        </div>\n      </>\n    );\n  }\n}\n\nTableEditor.propTypes = {\n  label: PropTypes.node.isRequired,\n  headers: PropTypes.arrayOf(models.tableHeader).isRequired,\n  // eslint-disable-next-line\n  value: PropTypes.array,\n  onUpdate: PropTypes.func.isRequired,\n  validate: PropTypes.func.isRequired,\n  disabled: PropTypes.bool,\n};\n\nTableEditor.defaultProps = {\n  value: [],\n  disabled: false,\n};\n","import memoizeOne from 'memoize-one';\nimport * as PropTypes from 'prop-types';\nimport { cloneDeep } from 'lodash';\nimport * as React from 'react';\nimport ChoiceGroup from './choiceGroup';\nimport { tagGroupTag } from '../../models';\n\nconst ResultSymbol = Symbol('Result');\n\nexport default class TagGroup extends React.Component {\n  getReverseLookup = memoizeOne((tags) => {\n    const values2parts = {};\n    tags.forEach((x) => {\n      values2parts[x.name] = x.tagList;\n    });\n    return values2parts;\n  });\n\n  getTagTree = memoizeOne((tags) => {\n    const tree = {};\n    tags.forEach((x) => {\n      const parts = x.tagList;\n      let cur = tree;\n      parts.forEach((part) => {\n        if (!cur[part]) {\n          cur[part] = {};\n        }\n        cur = cur[part];\n      });\n      cur[ResultSymbol] = x.name;\n    });\n\n    return tree;\n  });\n\n  componentDidMount() {\n    const { onUpdate, value } = this.props;\n    if (!value) {\n      onUpdate(this.getOrDefaultChosen().result);\n    }\n  }\n\n  onChange(idx, val) {\n    const { onUpdate, tags, value } = this.props;\n    const previousParts = (value && this.getReverseLookup(tags)[value]) || [];\n    const { parts, result } = this.getOrDefaultChosen([...previousParts.slice(0, idx), val]);\n    onUpdate(result || parts.reduce(\n      (node, part) => node[part],\n      this.getTagTree(tags),\n    )[ResultSymbol]);\n  }\n\n  getOrDefaultChosen(rawChosen) {\n    const { groupLabels, tags } = this.props;\n    const chosen = rawChosen || [];\n    if (chosen.length < groupLabels.length) {\n      let cur = this.getTagTree(tags);\n      const newChosen = cloneDeep(chosen);\n      for (let i = 0; i < groupLabels.length; i += 1) {\n        if (!newChosen[i]) {\n          [newChosen[i]] = Object.keys(cur);\n        }\n        cur = cur[newChosen[i]];\n      }\n      return { parts: newChosen, result: cur[ResultSymbol] };\n    }\n    return { parts: chosen };\n  }\n\n  render() {\n    const {\n      label, value, groupLabels, tags, disabled, baseDockers, isAdd, putAdd, addSteps, addValue, baseDocker\n    } = this.props;\n    const { parts } = this.getOrDefaultChosen((value && this.getReverseLookup(tags)[value]) || []);\n    const content = [];\n    let cur = this.getTagTree(tags);\n    for (let i = 0; i < groupLabels.length; i++) {\n      content.push(\n        <div className=\"pt2\" key={i}>\n          <ChoiceGroup\n            isAdd={isAdd}\n            putAdd={putAdd}\n            addSteps={addSteps}\n            addValue={addValue}\n            baseDocker={baseDocker}\n            baseDockers={baseDockers}\n            label={groupLabels[i]}\n            options={Object.keys(cur).map( x => ({ name: x}))}\n            value={parts[i]}\n            onUpdate={val => this.onChange(i, val)}\n            disabled={disabled}\n          />\n        </div>,\n      );\n      cur = cur[parts[i]];\n    }\n\n    return (\n      <>\n        <div>\n          {label}\n        </div>\n        <div>\n          {content}\n        </div>\n      </>\n    );\n  }\n}\n\nTagGroup.propTypes = {\n  label: PropTypes.node.isRequired,\n  groupLabels: PropTypes.arrayOf(PropTypes.node).isRequired,\n  tags: PropTypes.arrayOf(tagGroupTag).isRequired,\n  value: PropTypes.string,\n  onUpdate: PropTypes.func.isRequired,\n  disabled: PropTypes.bool,\n};\n\nTagGroup.defaultProps = {\n  value: '',\n  disabled: false,\n};\n","import C from 'classnames';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\n\nimport * as models from '../models';\nimport ChoiceGroup from './settings/choiceGroup';\nimport TextFields from './settings/textField';\nimport TableEditor from './settings/tableEditor';\nimport TagGroup from './settings/tagGroup';\nimport validate from './validator';\n\nexport default class SettingsEditor extends React.Component {\n  onUpdate(key, value) {\n    const { onUpdate } = this.props;\n    const res = {};\n    res[key] = value;\n    if(!onUpdate) return \n    onUpdate(res)\n  }\n\n  render() {\n    const { settings, value, disabled, content, baseDockers, isAdd, putAdd, addValue, addSteps,\n      baseDocker, image_url, onRef\n     } = this.props;\n    const t = content? content.type:''\n    return settings.map((setting, i) => {\n      let { label } = setting;\n      if (!label) {\n        label = setting.name;\n      }\n      if (setting.condition && value[setting.condition.name] !== setting.condition.equals) {\n        return null;\n      }\n      let contents = null;\n      switch (setting.type) {\n        case 'text':\n          contents = (\n            <TextFields\n              t={t}\n              onRef={onRef}\n              label={label}\n              putAdd={putAdd}\n              image_url={image_url}\n              value={value[setting.name]}\n              onUpdate={val => this.onUpdate(setting.name, val)}\n              validate={val => validate(setting, val)}\n              disabled={setting.disabled || disabled}\n            />\n          );\n          break;\n        case 'choice':\n          contents = (\n            <ChoiceGroup\n              addSteps={addSteps}\n              addValue={addValue}\n              isAdd={isAdd}\n              putAdd={putAdd}\n              label={label}\n              baseDockers={baseDockers}\n              baseDocker={baseDocker}\n              value={value[setting.name]}\n              onUpdate={val => this.onUpdate(setting.name, val)}\n              options={setting.options}\n              disabled={disabled}\n            />\n          );\n          break;\n        case 'table':\n          contents = (\n            <TableEditor\n              label={label}\n              t={t}\n              value={value[setting.name]}\n              onUpdate={val => this.onUpdate(setting.name, val)}\n              validate={val => validate(setting, val)}\n              headers={setting.headers}\n              disabled={disabled}\n            />\n          );\n          break;\n        case 'tag-group':\n          contents = (\n            <TagGroup\n              addSteps={addSteps}\n              addValue={addValue}\n              isAdd={isAdd}\n              putAdd={putAdd}\n              label={label}\n              baseDocker={baseDocker}\n              baseDockers={baseDockers}\n              value={value[setting.name]}\n              onUpdate={val => this.onUpdate(setting.name, val)}\n              groupLabels={setting.groupLabels}\n              tags={setting.tags}\n              disabled={disabled}\n            />\n          );\n          break;\n        default:\n          throw new Error(`invalid setting type ${setting.type}`);\n      }\n      return (\n        <div\n          className={C({'bt':t === 'edit_entrypoint_step' || t === 'edit_run_step'},'b--near-white pv2')}\n          key={setting.name}\n        >\n          {contents}\n        </div>\n      );\n    });\n  }\n}\n\nSettingsEditor.propTypes = {\n  settings: PropTypes.arrayOf(models.stepSetting).isRequired,\n  // eslint-disable-next-line\n  value: PropTypes.object.isRequired,\n  onUpdate: PropTypes.func.isRequired,\n  disabled: PropTypes.bool,\n};\n\nSettingsEditor.defaultProps = {\n  disabled: false,\n};\n","import * as PropTypes from 'prop-types';\nimport * as React from 'react';\nimport { cloneDeep } from 'lodash';\nimport C from 'classnames';\nimport { DefaultButton, PrimaryButton } from 'office-ui-fabric-react'\n\nimport * as Models from '../models';\nimport SettingsEditor from '../settingsEditor';\nimport { getStepSettings, getStep } from './steps';\nimport * as Settings from './settings';\nimport validate from '../settingsEditor/validator';\n\nclass EditStep extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      editingName: props.stepToEdit?!props.stepToEdit.name:'',\n      saving: false,\n      saveInfo: { invalid: true },\n    };\n  }\n\n  get editingStep() {\n    const { stepToEdit, config, type, runSteps } = this.props;\n    let list = config[`${type}_steps`] || `${type}Steps`;\n    if(list === 'runSteps') list = runSteps\n    return stepToEdit?stepToEdit || list.find(item =>  item.id === stepToEdit.id) :''\n  }\n\n  onNameChange = (e) => {\n    this.submitChange(e.target.name, e.target.value);\n  }\n\n  onConfigChange = (configUpdate) => {\n    this.submitChange('config', { ...this.editingStep.config, ...configUpdate });\n  }\n\n  onSaveInfoChange = (saveInfoUpdate) => {\n    const { saveInfo } = this.state;\n    const newSaveInfo = { ...cloneDeep(saveInfo), ...saveInfoUpdate };\n    newSaveInfo.invalid = !validate(Settings.saveStep, newSaveInfo);\n    this.setState({ saveInfo: newSaveInfo });\n  }\n  \n  onLeaveSavingMode = () => {\n    this.setState({ saving: false });\n  }\n  \n  // isDelStep = (steps)=> {\n  //   const {\n  //     type, onSwitchContent, addSteps, content, runSteps, entrypointSteps, stepToEdit, savedSteps\n  //   } = this.props;\n  //   const newStepList = cloneDeep(steps);\n  //   const idx = newStepList.findIndex(item => item.id === stepToEdit.id);\n  //   steps.splice(0, 1)\n  //   if(!runSteps.length&&!entrypointSteps.length){\n  //     // savedSteps.splice(1,1,'edit_general')\n  //     onSwitchContent({type: 'edit_general'})\n  //   }else if (idx === steps.length) {\n  //     onSwitchContent({ type: content.type, stepToEdit: steps[idx - 1] });\n  //   }{\n  //     // savedSteps.splice(1,1,'add_run_step')\n  //     onSwitchContent({ type: content.type, stepToEdit: steps[idx] });\n  //   }\n  //   // if(runSteps.length === 0 && entrypointSteps.length > 1){\n  //     //   savedSteps.splice(1,1,'add_entrypoint_step')\n  //     // }else if(entrypointSteps.length === 0 && runSteps.length > 1) {\n  //     //   savedSteps.splice(1,1,'add_run_step')\n  //     // }else {\n  //     //   savedSteps.splice(1,1,'edit_general')\n  //     // }\n  //   addSteps(steps,type)\n  // }\n\n  // delete = (e) => {\n  //   e.stopPropagation()\n  //   const {\n  //     type, runSteps, entrypointSteps\n  //   } = this.props;\n  //   if(type === 'run'){\n  //     if(!runSteps) return\n  //     this.isDelStep(runSteps)\n  //   }else if(type === 'entrypoint'){\n  //     if(!entrypointSteps) return\n  //     this.isDelStep(entrypointSteps)\n  //   }\n   \n  //   // onUpdate({ [stepListName]: newStepList });\n  //   // if(runSteps && !runSteps.length){\n  //   //   onSwitchContent({type: \"add_run_step\"})\n  //   // }else if(entrypointSteps && !entrypointSteps.length){\n  //   //   onSwitchContent({type: \"add_entrypoint_step\"})\n  //   // }\n    \n  // }\n\n  save = () => {\n    this.onLeaveSavingMode();\n  }\n  _updateStepList (newStepList,steps, newStep) {\n    newStepList = cloneDeep(steps);\n    const idx = newStepList.findIndex(item => item.id === newStep.id)\n    newStepList[idx] = newStep;\n    steps.splice(idx,1,newStep)\n    return newStepList\n  }\n  submitChange(name, to) {\n    const { onUpdate, type, runSteps, entrypointSteps } = this.props;\n    const newStep = cloneDeep(this.editingStep);\n    newStep[name] = to;\n    const stepListName = `${type}_steps`;\n    let newStepList\n    if(stepListName === 'run_steps') {\n      const stepList = this._updateStepList(newStepList, runSteps, newStep)\n      onUpdate({ [stepListName]: stepList });\n    }else if(stepListName === 'entrypoint_steps') {\n      const stepList = this._updateStepList(newStepList, entrypointSteps, newStep)\n      onUpdate({ [stepListName]: stepList });\n    }\n  }\n\n  render() {\n    const { editingStep, state: { editingName, saving } } = this;\n    const { onSddSteps, content: { type }, content } = this.props\n    const baseStep = editingStep ? getStep(editingStep.type) : '';\n    return (\n        baseStep ? <div className={C({'ml4': type === 'edit_run_step'\n         || type === 'edit_entrypoint_step'},\"c-st mv2 pt1\")}>\n        {/* <div className=\"mt2 fr\">\n          <Button onClick={this.delete}>\n            Delete\n          </Button>\n        </div> */}\n        <div className=\"mv2\">\n          {\n            editingName ? (\n              <input\n                name=\"name\"\n                className={C({ 'ba b--red': !editingStep.name })}\n                onChange={this.onNameChange}\n                onBlur={() => editingStep.name && this.setState({ editingName: false })}\n                value={editingStep.name}\n              />\n            ) : (\n              <>\n                <span>{editingStep.name}</span>\n                <i\n                  className=\"ml2 fa fa-edit hover-black-80 pointer dn\"\n                  onClick={() => this.setState({ editingName: true })}\n                />\n              </>\n            )\n          }\n        </div>\n        {baseStep.name !== editingStep.name && (\n          <div className=\"c-st mv2\">(Base step: {baseStep.name})</div>\n        )}\n        {/* {saving && (\n          <>\n            <SettingsEditor\n              settings={Settings.saveStep}\n              onUpdate={this.onSaveInfoChange}\n              value={saveInfo}\n            />\n            <div className=\"flex justify-between\">\n              <div>\n                <Button className=\"dib mt2\" onClick={this.onLeaveSavingMode}>\n                  <i className=\"fa fa-times mr1\" />\n                  Cancel\n                </Button>\n              </div>\n              <div>\n                <Button className=\"dib mt2\" onClick={this.save} disabled={saveInfo.invalid}>\n                  <i className=\"fa fa-save mr1\" />\n                  Save\n                </Button>\n              </div>\n            </div>\n            <hr />\n          </>\n        )} */}\n       {<SettingsEditor\n          settings={getStepSettings(editingStep.type)}\n          onUpdate={ type ===\"edit_entrypoint_step\" || type === \"edit_run_step\"?this.onConfigChange:(()=>{})}\n          content={content}\n          value={editingStep.config||''}\n          disabled={saving}\n        />}\n        {\n          type ===\"add_entrypoint_step\" || type === \"add_run_step\" ? \n          <PrimaryButton\n            text='Add'\n            onClick={onSddSteps}\n            allowDisabledFocus={true}/> \n          :''\n        }\n    </div> : <div></div>\n    );\n  }\n}\n\nEditStep.propTypes = {\n  config: Models.config.isRequired,\n  type: Models.stepCommand.isRequired,\n  // stepToEdit: Models.step.isRequired,\n  onUpdate: PropTypes.func.isRequired,\n  onSwitchContent: PropTypes.func.isRequired,\n};\n\nexport default EditStep;\n","import { cloneDeep } from 'lodash';\nimport uuid from 'uuid';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\nimport C from 'classnames';\nimport { Icon } from 'office-ui-fabric-react/lib/Icon';\n\nimport EditStep from './editStep';\nimport * as Models from '../models';\nimport { filterSteps, getStepSettings } from './steps';\nimport validate from '../settingsEditor/validator';\n\nclass AddStep extends React.Component {\n  state = {\n    selectedCard: '',\n    editing: false,\n    editingSavedStep: {},\n  };\n\n  onSelect(cardId) {\n    this.setState({ selectedCard: cardId, editingSavedStep: {}, editing: false });\n  }\n\n  onEdit(savedStep) {\n    if (!savedStep) {\n      this.setState({ editingSavedStep: {}, editing: false });\n    } else {\n      this.setState({ editingSavedStep: savedStep, editing: true });\n    }\n  }\n\n  onConfigChange = (configUpdate) => {\n    const { editingSavedStep } = this.state;\n    const newSavedStep = cloneDeep(editingSavedStep);\n    newSavedStep.defaultConfig = { ...newSavedStep.defaultConfig, ...configUpdate };\n    newSavedStep.defaultConfig.invalid = !validate(\n      getStepSettings(editingSavedStep.baseType),\n      newSavedStep.defaultConfig,\n    );\n    this.setState({ editingSavedStep: newSavedStep });\n  }\n\n  onConfigSave = () => {\n    this.onEdit(null);\n  }\n  _goBack = (type,onSwitchContent)=> {\n    if(type==='add_run_step') {\n      onSwitchContent({ type: 'add_run_step' })\n    }else {\n      onSwitchContent({ type: 'add_entrypoint_step' })\n    }\n  }\n  _addSteps = (item,add)=> {\n    console.log(item);\n    const { config, type, onUpdate, onSwitchContent, addSteps } = this.props;\n    const stepListName = `${type}_steps`;\n    const step = {\n      id: uuid(),\n      name: item.name,\n      type: item.type,\n      config: item.defaultConfig || {},\n    };\n    if (item.config && !item.config.every(c => c.optional)) {\n      step.invalid = true;\n    }\n    const newStepList = cloneDeep(config[stepListName]);\n    newStepList.shift()\n    newStepList.splice(0,(newStepList.length),step)\n    onUpdate({ [stepListName]: newStepList },(item,type)=> {\n      if(type){\n        if(add) addSteps(item,type)\n        onSwitchContent({ type: 'add_run_step', stepToEdit: item })\n      }else {\n        if(add) addSteps(item,'en')\n        onSwitchContent({ type: 'add_entrypoint_step', stepToEdit: item })\n      }\n    },1);\n  }\n  \n  renderBaseStepList(filteredSteps) {\n    const { content: { stepToEdit, type }, onUpdate, onSwitchContent } = this.props;\n    const { selectedCard } = this.state;\n    return (\n        <ul className={'list pl4'}>\n          {filteredSteps.map((item, index) => \n          <li className={'cb pv3 bt b--near-white '} key={index}>\n            <span className={'pointer h3 mv7 '}  onClick={(e) => {\n              e.stopPropagation();\n              this._addSteps(item)\n          }}>{ item.name }</span>\n          <Icon\n            iconName={C({'ChevronUpMed': stepToEdit && stepToEdit.type === item.type})}\n            className=\"fr pointer mr4 f7\"\n            aria-hidden=\"true\"\n             onClick={(e)=>{\n              e.stopPropagation()\n              if(type==='add_run_step') {\n                onSwitchContent({ type: 'add_run_step' })\n              }else {\n                onSwitchContent({ type: 'add_entrypoint_step' })\n              }\n            }}\n            />\n           <Icon\n            iconName={C({'ChevronDownMed': !stepToEdit || stepToEdit && stepToEdit.type !== item.type})}\n            className=\"fr pointer mr4 f7\"\n            aria-hidden=\"true\" \n            onClick={(e)=>{\n              e.stopPropagation();\n              this._addSteps(item)\n            }\n            }\n           />\n          {stepToEdit && stepToEdit.type === item.type? <EditStep\n              key={stepToEdit.id || ''}\n              stepToEdit={stepToEdit}\n              onUpdate={onUpdate}\n              onSddSteps={()=>this._addSteps(item,'add')}\n              {...this.props}\n          /> : ''}\n          </li>)}\n        </ul>\n      )\n  }\n\n  render() {\n    const { baseDockers, type } = this.props;\n    const { os } = baseDockers.baseDocker ? baseDockers.baseDocker:''\n    const filteredSteps = filterSteps(type, os);\n    return (\n      <div>\n        {this.renderBaseStepList(filteredSteps)}\n      </div>\n    );\n  }\n}\n\nAddStep.propTypes = {\n  content: Models.content.isRequired,\n  config: Models.config.isRequired,\n  type: Models.stepCommand.isRequired,\n  onUpdate: PropTypes.func.isRequired,\n  onSwitchContent: PropTypes.func.isRequired\n};\n\nexport default AddStep;","import { cloneDeep } from 'lodash';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\n\nimport * as Models from '../models';\nimport SettingsEditor from '../settingsEditor';\nimport * as Settings from './settings';\n\nexport default class EditGeneral extends React.Component {\n  constructor(props) {\n    super(props);\n    this.onChange = this.onChange.bind(this);\n  }\n\n  onChange(generalUpdate) {\n    const { config, onUpdate } = this.props;\n    onUpdate({ general: { ...cloneDeep(config.general), ...generalUpdate } });\n  }\n\n  render() {\n    const { config } = this.props;\n    return (\n      <div className=\"ph4 pa3 pt0\">\n        <SettingsEditor\n          settings={Settings.general}\n          value={config.general}\n          onUpdate={this.onChange}\n        />\n      </div>\n    );\n  }\n}\n\nEditGeneral.propTypes = {\n  config: Models.config.isRequired,\n  onUpdate: PropTypes.func.isRequired,\n};\n","import ubuntu from './ubuntu.json';\nimport cuda from './cuda.json';\nimport tensorflow from './tensorflow.json';\nimport deepo from './deepo.json';\n\nexport default [\n  ubuntu,\n  cuda,\n  tensorflow,\n  deepo,\n];\n","import * as PropTypes from 'prop-types';\nimport * as React from 'react';\nimport C from 'classnames';\nimport { cloneDeep, memoize } from 'lodash';\nimport { DefaultButton, PrimaryButton } from 'office-ui-fabric-react'\nimport { Icon } from 'office-ui-fabric-react/lib/Icon';\n\n\nimport * as Models from '../models';\nimport Button from '../components/button';\nimport SettingsEditor from '../settingsEditor';\nimport dockers from './dockers';\nimport * as Settings from './settings';\nimport { getStep } from './steps';\nimport {validateConfig} from \"../config-utils\";\n\n    const ResetButton = ({ onClick, item, index, id}) => (<Button className=\"fr\" onClick={onClick} >\n    { <i className={ index === id ? \"fr f7 ms-Icon ms-Icon--ChevronUpMed black-30\" : \"f7 ms-Icon ms-Icon--ChevronDownMed black-30\"} aria-hidden=\"true\" /> }\n    </Button>);\n\n    ResetButton.propTypes = {\n      onClick: PropTypes.func.isRequired,\n  };\n\n    class EditDocker extends React.Component {\n      state ={\n        id: '',\n        isShow: false,\n        isAdd: false,\n      }\n    getPreset = memoize(base => dockers.find(p => p.base === base));\n      onPresetChosen(to, index) {\n        const { id } = this.state\n        this.setState({\n        id: index,\n      })\n        if(id === index) return\n        let newBaseDocker;\n        if (!to) {\n        newBaseDocker = {};\n      } else if (to === 'Custom') {\n        newBaseDocker = {\n        custom: true,\n      };\n    } else {\n        newBaseDocker = {\n        presetBase: to.base,\n      };\n    }\n      this.update(newBaseDocker);\n  }\n\n    onPresetUpdate = ({ tag }) => {\n      const { config } = this.props;\n      const newBaseDocker = cloneDeep(config.base_docker);\n      newBaseDocker.image_url = `${newBaseDocker.presetBase}:${tag}`;\n      newBaseDocker.os = 'ubuntu';\n      this.baseDocker = newBaseDocker\n      this.update(newBaseDocker);\n  }\n\n    onCustomUpdate = (dockerUpdate) => {\n      const { config } = this.props;\n      this.update({ ...cloneDeep(config.base_docker), ...dockerUpdate });\n  }\n\n    update(newBaseDocker) {\n      const { onUpdate, config } = this.props;\n      if (newBaseDocker.os) {\n      const pred = s => getStep(s.type).os.includes(newBaseDocker.os);\n      onUpdate({\n      run_steps: config.run_steps.filter(pred),\n      entrypoint_steps: config.entrypoint_steps.filter(pred),\n      base_docker: newBaseDocker,\n    });\n    } else {\n      onUpdate({\n      base_docker: newBaseDocker,\n      });\n    }\n  }\n    putAdd (th) {\n      th.setState({ isAdd: false })\n    }\n    onRef =  (value) => {\n      this.custom = value\n    }\n    _clicked () {\n      const {  baseDocker, th, text } = this\n      const { items, props:{addSteps} } = th\n      if (text === 'Apply') {\n        th.setState({\n          isShow: false,\n          isAdd: true,\n        })\n        if(!items === 'Custom') th.custom =''\n        if (items === 'Custom') {\n          if(!th.custom){\n            alert('docker should not be empty')\n            return\n          }\n          th.setState({\n            isShow: true,\n            isAdd: true,\n          })\n          // th.setState({docker:items})\n          addSteps({baseDocker,items}, 'baseDockers')\n          th.custom = ''\n          return\n        }  \n        // th.setState({docker:items})\n        addSteps({baseDocker,items}, 'baseDockers')\n      }else if(text === 'Cancel'){\n        th.setState({\n          isShow: false,\n          isAdd: false\n        })\n        if(items !== 'Custom') th.update(th.baseDocker)\n        addSteps('', 'baseDockers')\n      }\n    }\n\n      _getButton () {\n        const { baseDockers, config: { base_docker: baseDocker } } = this.props\n        const { _clicked } = this\n        const th = this\n        const { isShow } = this.state\n        const presetBase = baseDockers && baseDockers.baseDocker? baseDockers.baseDocker.presetBase? cloneDeep(baseDockers.baseDocker.presetBase ): 'a': ''\n        return baseDocker.presetBase === presetBase  ||\n          this.items==='Custom' && isShow ||\n          this.items==='Custom' && this.image_url ?\n            <DefaultButton\n              baseDocker={baseDocker}\n              th={th}\n              styles={{root:{border:'none'}}}\n              text='Cancel'\n              onClick={_clicked}\n              allowDisabledFocus={true}\n            /> : \n            <PrimaryButton\n              baseDocker={baseDocker}\n              text='Apply'\n              th={th}\n              onClick={_clicked}\n              allowDisabledFocus={true}\n            />\n    }\n    render() {\n      const { config: { base_docker: baseDocker }, baseDockers, addValue, addSteps, content} = this.props;\n      const { id, isAdd } = this.state\n      const docker = baseDockers.items? baseDockers.items: ''\n      this.image_url = baseDockers && baseDockers.items === 'Custom'?  baseDockers.baseDocker.image_url: '' \n      if (baseDocker.custom) {\n        this.a = <div className='black-60'>\n                    <div className=\"mv2\">Custom Base Docker</div>\n                    <SettingsEditor\n                    content={content}\n                    addValue={addValue}\n                    addSteps={addSteps}\n                    onRef={this.onRef}\n                    image_url={this.image_url}\n                    baseDockers={baseDockers}\n                    settings={Settings.docker}\n                    isAdd={isAdd}\n                    putAdd={()=>this.putAdd(this)}\n                    value={baseDocker}\n                    onUpdate={this.onCustomUpdate}\n                    />\n                    { this._getButton () }\n                  </div>\n      }\n      if (baseDocker.presetBase) {\n          const preset = this.getPreset(baseDocker.presetBase);\n        this.a = <div className='black-60 c-st mv2'>\n                  {/* <div className=\"mv2\">{preset.name}</div> */}\n                  <div className=\"\">[Image: {baseDocker.image_url}]</div>\n                  <SettingsEditor\n                    isAdd={isAdd}\n                    addValue={addValue}\n                    addSteps={addSteps}\n                    putAdd={()=>this.putAdd(this)}\n                    baseDocker={baseDocker}\n                    baseDockers={baseDockers}\n                    settings={preset.config}\n                    value={{tag: baseDocker.image_url && baseDocker.image_url.split(':').pop()}}\n                    onUpdate={this.onPresetUpdate}\n                    />\n                    { this._getButton () }\n                </div>\n    }\n      return (\n        <ul className='list pl4 pr1'>\n          {dockers.map((item, index) => <li className={'cb pv3 bt b--near-white '} key={index}><span className={C({'blue-custom':docker.name === item.name},'pointer h3 mv7')}  \n            onClick={() => { this.items= item, this.onPresetChosen(item,index)}}>{item.name}\n            </span>\n            <Icon iconName={C({'StatusCircleOuter':docker.name === item.name})} className={C({'v-mid ml3 blue-custom':docker.name === item.name})} />\n            <Icon iconName ={C({'StatusCircleCheckmark':docker.name === item.name})} className={C({'v-top nl2_9 ms-Icon white':docker.name === item.name})} />\n            <Icon iconName={C({'ChevronDownMed':index !== id,})} className= {C({'pointer mr4 fr f7':index !== id,})}\n             onClick= {() => { this.items= item, this.onPresetChosen(item,index)}}\n            />\n            <Icon iconName={C({'ChevronUpMed':index === id,})} className={C({'pointer mr4 fr f7':index === id,})}\n             onClick= {()=> this.setState({id:10})}\n            />\n            { index === id ? this.a : <div></div>}\n          </li>)}\n          <li className={'cb pv3 bt-m bt bb b--near-white'}><span  className={C({'blue-custom':docker==='Custom'},'h3 mv7 pointer')}\n            onClick={() => { this.items = 'Custom', this.onPresetChosen('Custom',4)}}>Custom</span>\n            <Icon iconName={C({'StatusCircleOuter':docker === 'Custom'})} className={C({'v-mid ml3 blue-custom':docker === 'Custom'})} />\n            <Icon iconName={C({'StatusCircleCheckmark':docker === 'Custom'})} className={C({'v-top nl2_9 white':docker === 'Custom'})} />\n            <Icon iconName={C({'ChevronDownMed':id !== 4,})} className= {C({'pointer mr4 fr f7':id !== 4,})}\n             onClick= {() => { this.items= 'Custom', this.onPresetChosen('Custom',4)}}\n            />\n            <Icon iconName={C({'ChevronUpMed':id === 4,})} className={C({'pointer mr4 fr f7':id === 4,})}\n              onClick= {()=> this.setState({id:10})}\n            />\n            { id === 4 ? this.a : <div></div> }\n          </li>\n        </ul>\n      );\n  }}\n\n    EditDocker.propTypes = {\n      addSteps: PropTypes.func.isRequired,\n      config: Models.config.isRequired,\n      onUpdate: PropTypes.func.isRequired,\n  };\n\n    export default EditDocker;\n\n\n","import FileSaver from 'file-saver';\nimport * as PropTypes from 'prop-types';\nimport React from 'react';\nimport 'react-toastify/dist/ReactToastify.css';\n\nimport Button from '../components/button';\n\nclass EditDockerfile extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      editing: false,\n      content: props.text,\n      switchColor: ''\n    };\n    this.textArea = React.createRef();\n  }\n\n  onChange = (e) => {\n    this.setState({ content: e.target.value });\n  }\n\n  onEdit = () => {\n    this.setState({ editing: true });\n  }\n\n  onCopy = () => {\n    const { switchColor } = this.state\n    this.setState({\n      switchColor: !switchColor\n    })\n    this.textArea.current.select();\n    console.log(this)\n    document.execCommand('copy');\n  }\n\n  onSave = () => {\n    const { content } = this.state;\n    FileSaver.saveAs(new Blob([content]), 'Dockerfile');\n  }\n\n  render() {\n    const { content, editing, switchColor } = this.state;\n    return (\n      <div className=\"bg-white pa3 f7 mh3 bt b--near-white\">\n        <div>Content</div>\n        <textarea\n          ref={this.textArea}\n          className= \"mt2 w-100 bg-black white\"\n          style={{ height: '96rem', maxHeight: '50vh' }}\n          value={content}\n          disabled={!editing}\n          onChange={this.onChange}\n          spellCheck={false}\n        />\n          <div  className=\"mt2\">\n            <Button className=\"fl tc mr2 pa1 ph3 bg-black-10 w2\" onClick={this.onCopy}>\n              <span className='black'>Copy</span>\n            </Button>\n            {/*{!editing && (*/}\n              <Button className=\"fl tc mr2 pa1 ph3 bg w2\" onClick={this.onEdit}>\n                 <span className='white'>Edit</span>\n              </Button>\n            {/*)}*/}\n            <Button className=\"fl tc mr2 pa1 ph3 bg-black-10 w2\" onClick={this.onSave}>\n              <span className='black'>Save</span>\n            </Button>\n          </div>\n      </div>\n    );\n  }\n}\n\nEditDockerfile.propTypes = {\n  text: PropTypes.string.isRequired,\n};\n\nexport default EditDockerfile;\n","import * as PropTypes from 'prop-types';\nimport * as React from 'react';\nimport * as C from 'classnames'\nimport { DefaultButton, PrimaryButton } from 'office-ui-fabric-react'\nimport { Icon } from 'office-ui-fabric-react/lib/Icon';\n\nimport Button from '../components/button'\nimport * as Models from '../models';\nimport AddStep from './addStep';\nimport EditStep from './editStep';\nimport EditGeneral from './editGeneral';\nimport EditDocke from './editDocker';\nimport EditDockerfile from './editDockerfile';\nimport { styles } from 'ansi-colors';\nimport { relative } from 'upath';\n\nconst stepTypeTitle = {\n  add_run_step: 'Add Run Step',\n  add_entrypoint_step: 'Add Entrypoint Step',\n  edit_run_step: 'Edit Run Step',\n  edit_entrypoint_step: 'Edit Entrypoint Step',\n  edit_general: 'General Config',\n  edit_docker: 'Base Docker',\n  edit_dockerfile: 'Generated Dockerfile',\n};\n\nfunction click (props,button) {\n  const { content:{type}, onSwitchContent, savedSteps } = props\n  const isSwitchBool = button.target.innerHTML === 'Next Page'\n  if(savedSteps.length > 2) savedSteps.splice(0,1)\n  switch (type) {\n    case 'edit_general':\n        savedSteps.splice(1,1,'edit_docker')\n        onSwitchContent({ type: 'edit_docker' })\n        break;\n    case 'edit_docker':\n        if(isSwitchBool){\n        savedSteps.splice(1,1,'add_run_step')\n          onSwitchContent({ type: 'add_run_step' }) \n        }else{\n        savedSteps.splice(1,1,'edit_general')\n        onSwitchContent({ type: 'edit_general' })\n        }\n        break;\n    case 'add_run_step':\n        if(isSwitchBool){\n        savedSteps.splice(1,1,'add_entrypoint_step')\n          onSwitchContent({ type: 'add_entrypoint_step' }) \n        }else{\n        savedSteps.splice(1,1,'edit_docker')\n        onSwitchContent({ type: 'edit_docker' })\n        }\n        break;\n    case 'add_entrypoint_step':\n        savedSteps.splice(1,1,'add_run_step')\n        onSwitchContent({ type: 'add_run_step' })\n        break;\n  }\n} \n\nconst Content = ({\n  config, content, onUpdate, onSwitchContent, entrypointSteps, runSteps, baseDockers,\n  addSteps, addValue, savedSteps, onRest\n}) => {\n  const stepType= stepTypeTitle[content.type]\n  const stepRunBool = stepType === 'Edit Run Step'\n  const stepEnBool =  stepType === 'Edit Entrypoint Step'\n  const stepEditDockerBool =  content.type === 'edit_docker'\n  const stepAddEnBool = content.type === 'add_entrypoint_step'\n  const stepAddRunBool = content.type === 'add_run_step'\n  const stepEditBool = content.type === 'edit_general'\n  const stepEditRunBool = content.type === 'edit_run_step'\n  const stepEditEnBool = content.type === 'edit_entrypoint_step'\n  const stepEditDockerfileBool = content.type === 'edit_dockerfile'\n  const stepToEdit = content.stepToEdit ? content.stepToEdit : ''\n  const sharedProps = {\n    baseDockers,\n    content,\n    config,\n    onUpdate,\n    onSwitchContent,\n    addSteps,\n    savedSteps,\n    onRest\n  };\n  return (\n    <div className=\"mt2\">\n      <div className=\"pl4 f5 mb3 flex relative items-center\">{stepTypeTitle[content.type]}\n        <Icon iconName='ChevronRightMed' className='ml3 f7 mr4' aria-hidden=\"true\" />\n        <DefaultButton\n          text='OnRest'\n          onClick={onRest}\n          iconProps={{iconName: 'Refresh'}}\n          allowDisabledFocus={true}\n          styles={{root:{border: 'none',borderRadius: '50%'}}}\n        />\n        {/* <span>{ stepRunBool ? addRunStep.name : '' || stepEnBool ? addEnStep.name : ''}</span> */}\n        {/* { stepType === 'Base Docker' ? \n            <Button \n            className='absolute-l right-0-l' \n            onClick={ ()=> {addIcon({type:'from',iconParameter,}), addSteps( '', 'baseDockers')} }\n            >Delete\n            </Button> \n          : ''\n        } */}\n        { stepRunBool || stepEnBool ?\n            <PrimaryButton\n            text='Back'\n            className='absolute-l right-0-l'\n            iconProps={{iconName:'RevToggleKey'}}\n            onClick={()=> stepRunBool ? \n              onSwitchContent({ type: 'add_run_step' }):\n              onSwitchContent({ type: 'add_entrypoint_step' })}\n            allowDisabledFocus={true}\n            />\n        : ''\n        }\n      </div>\n      {(() => {\n        switch (content.type) {\n          case 'add_run_step':\n            return (\n              <AddStep type=\"run\" {...sharedProps}\n               runSteps={runSteps} \n               entrypointSteps={entrypointSteps} \n               />);\n          case 'add_entrypoint_step':\n            return (\n              <AddStep type=\"entrypoint\" {...sharedProps} entrypointSteps={entrypointSteps} runSteps={runSteps} />\n            );\n          case 'edit_run_step':\n            return (\n              <EditStep\n                  type=\"run\"\n                  runSteps={runSteps}\n                  entrypointSteps={entrypointSteps}\n                  key={stepToEdit?content.stepToEdit.id : ''}\n                  stepToEdit={stepToEdit}\n                  onUpdate={onUpdate}\n                  {...sharedProps}\n              />\n            );\n          case 'edit_entrypoint_step':\n            return (\n              <EditStep\n                runSteps={runSteps}\n                entrypointSteps={entrypointSteps}\n                type=\"entrypoint\"\n                key={stepToEdit?content.stepToEdit.id : ''}\n                stepToEdit={stepToEdit}\n                onUpdate={onUpdate}\n                {...sharedProps}\n              />\n            );\n          case 'edit_general':\n            return (\n              <EditGeneral {...sharedProps} />\n            );\n          case 'edit_docker':\n            return (\n              <EditDocke {...sharedProps} addValue={addValue} />\n            );\n          case 'edit_dockerfile':\n            return (\n              <EditDockerfile\n                text={content.text}\n                key={content.text}\n              />\n            );\n          default:\n            return null;\n        }\n      })()}\n    <PrimaryButton\n      content={content} \n      text='Previous Page'\n      styles={{\n        root:{\n          display: C({'none':\n            stepEditBool ||\n            stepEditRunBool ||\n            stepEditEnBool ||\n            stepEditDockerfileBool ||\n            stepAddRunBool && !baseDockers ||\n            stepAddEnBool && !baseDockers \n            }),\n            position: 'absolute',\n            right: C({'165px': stepAddEnBool || stepEditDockerBool && !baseDockers,'321px': stepEditDockerBool && baseDockers || stepAddRunBool}),\n            width: '132px',\n            bottom:'64px'\n          \n      }}}\n      onClick={ click.bind(this,{...sharedProps}) }\n      allowDisabledFocus={true}\n      />\n    <PrimaryButton\n      text='Next Page'\n      styles={{\n        root:{\n          display: C({\n            'none':stepAddEnBool ||\n            stepEditRunBool || stepAddRunBool && !baseDockers ||\n            stepEditEnBool || stepAddEnBool && !baseDockers ||\n            stepEditDockerfileBool ||\n            stepEditDockerBool && !baseDockers \n              }),\n            position: 'absolute',\n            right: '165px',\n            width: '132px',\n            bottom:'64px'\n        }}}\n      onClick={ click.bind(this,{...sharedProps}) }\n      allowDisabledFocus={true}  \n    />\n    </div>\n  );\n};\n\nContent.propTypes = {\n  addSteps: PropTypes.func.isRequired,\n  config: Models.config.isRequired,\n  content: Models.content.isRequired,\n  onUpdate: PropTypes.func.isRequired,\n  onSwitchContent: PropTypes.func.isRequired,\n};\n\nexport default Content;\n","import * as React  from 'react';\nimport { cloneDeep } from 'lodash';\nimport { Nav } from 'office-ui-fabric-react/lib/Nav';\nimport * as Models from \"../models\";\nimport * as PropTypes from \"prop-types\";\nimport './sidebar.scss'\n\nimport { from } from 'rxjs';\nimport { yellow } from 'ansi-colors';\nimport { is } from 'immutable';\n\nclass Bar extends React.Component {\n    state = {\n        step: null,\n        selectedKey: '',\n        addBool: true,\n        switchType: ''\n    }\n    componentDidMount() {\n        const buttons = document.querySelectorAll('button')\n        buttons.forEach( button=>{\n            button.title =''\n        })\n    }\n\n    _onLinkClick = (item,k) =>{\n        const { className } = item.target\n        const { runSteps, entrypointSteps, onSwitchContent, savedSteps, content, addSteps, onUpdate } = this.props\n        let {key} = k;\n        const cType = content.type\n        savedSteps.splice(1,1,key || 'edit_general')\n        switch ( key) {\n            // case 'edit_general':\n            //     onSwitchContent({ type: 'edit_general' })\n            //     break;\n            // case 'edit_docker':\n            //     onSwitchContent({ type: 'edit_docker' })\n            //     break;\n            // case 'add_run_step':\n            //     onSwitchContent({ type: 'add_run_step' })\n            //     break;\n            // case 'add_entrypoint_step':\n            //     onSwitchContent({ type: 'add_entrypoint_step' })\n            //     break;\n                case 'edit_general':\n                        savedSteps.splice(1,1,'edit_general')\n                        onSwitchContent({ type: 'edit_general' })\n                        break;\n                case 'edit_docker':\n                    savedSteps.splice(1,1,'edit_docker')\n                    onSwitchContent({ type: 'edit_docker' }) \n                    break;\n                case 'add_run_step':\n                    savedSteps.splice(1,1,'add_run_step')\n                    onSwitchContent({ type: 'add_run_step' }) \n                    break;\n                case 'add_entrypoint_step':\n                    savedSteps.splice(1,1,'add_entrypoint_step')\n                    onSwitchContent({ type: 'add_entrypoint_step' })\n                    break;\n            }\n        let n\n        let i\n        const entrypointNewItems = cloneDeep(entrypointSteps)\n        const runNewItems = cloneDeep(runSteps)\n        const idx = runNewItems.findIndex(ni => {\n            n = ni.id\n            return ni.id === k.key\n        });\n        const id = entrypointNewItems.findIndex(ni => {\n            i = ni.id\n            return ni.id === k.key\n        });\n        if((idx || id) && (className.indexOf('icon') != -1)) {\n            if(cType === 'edit_run_step' || cType === 'add_run_step') {\n                runSteps.splice(idx,1)\n                addSteps(runSteps, 'run')\n                if(runSteps.length) {savedSteps.splice(1,1,runSteps[0].id)\n                }else {\n                    if(entrypointSteps.length) {savedSteps.splice(1,1,entrypointSteps[0].id)\n                    }else {\n                        onSwitchContent({ type: 'edit_general' })\n                        savedSteps.splice(1,1,'edit_general')\n                    }\n                }\n                return\n            }else if(cType === 'edit_entrypoint_step' || cType === 'add_entrypoint_step') {\n                entrypointSteps.splice(id,1)\n                addSteps(entrypointSteps, 'entrypoint')\n                if(entrypointSteps.length) {savedSteps.splice(1,1,entrypointSteps[0].id)\n                }else {\n                    if(runSteps.length) {savedSteps.splice(1,1,runSteps[0].id)\n                    }else {\n                        onSwitchContent({ type: 'edit_general' })\n                        savedSteps.splice(1,1,'edit_general')\n                    }\n                }\n            }\n            return\n        }\n        if(n === k.key && runSteps.length){\n            onUpdate({stepToEdit:runSteps[idx]})\n            onSwitchContent({ type: 'edit_run_step', stepToEdit: runSteps[idx] })\n        }else if(i === k.key && entrypointSteps.length){\n            onUpdate({entrypointSteps})\n            onSwitchContent({ type: 'edit_entrypoint_step', stepToEdit:  entrypointSteps[id] })\n        }\n    }\n    getStep = (steps) =>{\n        return  steps.map((step) => {\n            return {name: step.name , key: step.id, icon: 'Delete'}\n        })\n    }\n    \n    render (){\n        const {  config,  baseDockers, runSteps, entrypointSteps, savedSteps } = this.props\n        this.run_steps =  this.getStep(runSteps)\n        this.entrypoint_steps = this.getStep(entrypointSteps)\n        const docker = baseDockers && baseDockers.baseDocker ? baseDockers.baseDocker.image_url: ''\n        const generalName = config.general.name\n        return (\n           savedSteps.length > 1 ? <Nav\n                initialSelectedKey= { savedSteps[1] }\n                selectedKey= { savedSteps[1] }\n                onLinkClick={ this._onLinkClick }\n                styles={{\n                    chevronIcon: {color: yellow},\n                    link: { height: 52, whiteSpace: 'pre', lineHeight: 14, color:'#333' }\n                }}\n                groups={[\n                    {\n                        links:[\n                            {\n                                key: 'edit_general',\n                                icon: generalName ? `StatusCircleCheckmark` : '',\n                                isExpanded: true,\n                                links:  [\n                                    {name: generalName ? 'General'+'\\n'+ generalName : 'General',\n                                    key: 'edit_general',\n                                    icon: generalName ? 'StatusCircleOuter':'warning'}\n                                ]\n                            },\n                            {\n                                key: 'edit_docker',\n                                icon: docker ? 'StatusCircleCheckmark' : '',\n                                isExpanded: true,\n                                links:  [\n                                    {name: docker ? 'From'+'\\n'+ docker :'From',\n                                    key: 'edit_docker',\n                                    icon: docker ?'StatusCircleOuter':'warning'}\n                                ]\n                            },\n                            {\n                                name: 'Run',\n                                key: 'add_run_step',\n                                links: this.run_steps,\n                                isExpanded: true,\n                            },\n                            {\n                                name: 'Entrypoint',\n                                key: 'add_entrypoint_step',\n                                links: this.entrypoint_steps,\n                                isExpanded: true,\n                                \n                            }\n                        ]\n                    }\n                ]}\n            /> : <div></div>\n        )\n    };\n}\n\nBar.propTypes = {\n    addSteps: PropTypes.func.isRequired,\n    config: Models.config.isRequired,\n    content: Models.content.isRequired,\n    onUpdate: PropTypes.func.isRequired,\n    onSwitchContent: PropTypes.func.isRequired,\n};\nexport default Bar;\n","import 'babel-polyfill';\nimport { cloneDeep, find } from 'lodash';\nimport * as React from 'react';\nimport Alert from 'react-s-alert';\nimport 'tachyons/css/tachyons.min.css';\nimport 'react-s-alert/dist/s-alert-default.css';\nimport { DefaultButton, PrimaryButton, autobind } from 'office-ui-fabric-react'\n\nimport gelato from './gelato/lib/index';\nimport './main.scss';\nimport Title from './title';\nimport Content from './content';\nimport Sidebar from './sidebar/sidebar';\nimport { validateConfig, configPreSave } from './config-utils';\nimport { getRectCenter } from 'fullcalendar';\n\nconst dummyConfig = {\n  version: '1',\n  general: {\n    name: 'noname',\n    shell: 'bash -c',\n    env_variables: [],\n    workdir: '~',\n  },\n  base_docker: {\n    invalid: true,\n  },\n  run_steps: [],\n  entrypoint_steps: [],\n  invalid: true,\n};\n\nconst LOCAL_STORAGE_KEY = 'icecream-last-state';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      config: dummyConfig,\n      content: {\n        type: 'edit_general',\n      },\n      savedSteps: ['edit_general','edit_general'],\n      baseDockers: '',\n      runSteps: [],\n      entrypointSteps: [],\n      addValue: []\n    };\n    this.onUpdate = this.onUpdate.bind(this);\n    this.onSwitchContent = this.onSwitchContent.bind(this);\n    this.onReset = this.onReset.bind(this);\n    this.addSteps = this.addSteps.bind(this);\n    this.onClick = this.onClick.bind(this);\n  }\n\n  async componentDidMount() {\n    const item = localStorage.getItem(LOCAL_STORAGE_KEY);\n    if (item) {\n      try {\n        const state = JSON.parse(item);\n        this.setState(state);\n      } catch (ex) {\n        console.log(ex);\n        Alert.warning('Failed to load last state.');\n      }\n    }\n  }\n  \n  componentDidUpdate() {\n    try {\n        localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(this.state));\n    } catch (ex){\n    }\n    \n  }\n  \n  onReset() {\n    this.setState({\n      config: cloneDeep(dummyConfig),\n      content: {\n        type: 'edit_general',\n      },\n      savedSteps: ['edit_general','edit_general'],\n      baseDockers: '',\n      runSteps: [],\n      entrypointSteps: [],\n      addValue: []\n    });\n  }\n  addSteps(step,type) {\n    const { runSteps, entrypointSteps, addValue } = this.state\n    switch (type) {\n      case 'add_run_step':\n        runSteps.push(step)\n        break;\n      case 'run':\n        this.setState({runSteps: step})\n        break;\n      case 'en':\n        entrypointSteps.push(step)\n        break;\n      case 'entrypoint':\n        this.setState({entrypointSteps: step})\n        break;\n      case 'baseDockers':\n        this.setState({baseDockers: step, addValue:[]})\n      case 'addValue':\n        addValue.push(step)\n        break;\n      default:\n    }\n    \n  }\n  onUpdate(update, onclick) {\n    const { config, content } = this.state;\n    const newConfig = validateConfig({ ...cloneDeep(config), ...update }, content);\n    if (content.type === 'edit_run_step') {\n      const { id } = content.stepToEdit;\n      const step = find(newConfig.run_steps, { id });\n      let newContent;\n      if (step) {\n        newContent = {\n          type: 'edit_run_step',\n          stepToEdit: step,\n        };\n      } else {\n        newContent = {\n          type: 'edit_general',\n        };\n      }\n      this.setState({ content: newContent, config: newConfig });\n    } else if (content.type === 'edit_entrypoint_step') {\n      const { id } = content.stepToEdit;\n      const step = find(newConfig.entrypoint_steps, { id });\n      let newContent;\n      if (step) {\n        newContent = {\n          type: 'edit_entrypoint_step',\n          stepToEdit: step,\n        };\n      } else {\n        newContent = {\n          type: 'edit_general',\n        };\n      }\n      this.setState({ content: newContent, config: newConfig });\n    } else {\n      this.setState({ config: newConfig }, ()=>{\n        if(content.type === 'add_run_step' && onclick){\n          {newConfig.run_steps.map((item)=>{\n            onclick(item,'add_run_step')})}\n        }else if (content.type === 'add_entrypoint_step' && onclick){\n          {newConfig.entrypoint_steps.map((item)=>{\n            onclick(item)})}\n        }\n      })\n    }\n  }\n\n  onSwitchContent(newContent) {\n    this.setState({ content: newContent });\n  }\n\n  componentDidCatch(error) {\n    Alert.error(error.toString(), { position: 'bottom-right' });\n  }\n  onClick () {\n    const { config, baseDockers } = this.state;\n    try {\n      if(!baseDockers) {Alert.error('docker should not be empty')\n        return}\n      this.onSwitchContent({\n        type: 'edit_dockerfile',\n        text: gelato(configPreSave(config)),\n      });\n    } catch (ex) {\n      Alert.error(`An error occured while generating Dockerfile: ${ex}`, { position: 'bottom-right' });\n      \n    }\n  }\n\n  render() {\n    const { config, content, baseDockers, runSteps, entrypointSteps, addValue, savedSteps } = this.state;\n    const docker = baseDockers? baseDockers: ''\n    const { image_url } = docker.baseDocker ? docker.baseDocker :''\n    \n    return (\n      <div className=\"helvetica dark-gray f6 vh-100\">\n        {/*<Title*/}\n        {/*  config={config}*/}\n        {/*  onUpdate={this.onUpdate}*/}\n        {/*  onReset={this.onReset}*/}\n        {/*  onSwitchContent={this.onSwitchContent}*/}\n        {/*  invalid={config.invalid}*/}\n        {/*/>*/}\n        {/* https://stackoverflow.com/questions/16671914/flexible-box-layout-model-how-should-auto-margins-in-the-cross-axis-direction-b */}\n        <div className=\"ms-Grid\" dir=\"ltr\" style={{height: '100%'}}>\n          <div className=\"ms-Grid-row\" style={{height: '100%'}}>\n              <div className=\"ms-Grid-col ms-sm6 ms-md4 ms-lg2 h-100 br b--near-white bw1 pr0\" >\n                <div>\n                  <Sidebar\n                      savedSteps={savedSteps}\n                      baseDockers={docker}\n                      addSteps={this.addSteps}\n                      config={config}\n                      content={content}\n                      runSteps={runSteps}\n                      entrypointSteps={entrypointSteps}\n                      onUpdate={this.onUpdate}\n                      onSwitchContent={this.onSwitchContent}\n                  />\n                </div>\n                <div style={{marginTop: '410px', textAlign: 'center'}}>\n                  <PrimaryButton \n                    text='Generate Dockerfile'\n                    onClick={this.onClick}\n                    disabled={config.invalid || !image_url}\n                    allowDisabledFocus={true}\n                    styles={{root:{border:'none'}}}\n                  />\n                  \n                  {/* <Button\n                      className= {config.invalid || !image_url? \"f7 db w-60 bg-black-10 mid-gray  mb5 c-t tc center\": \"f7 db w-60 bg mid-gray  mb5 c-t tc center\"}\n                      disabled={config.invalid || !image_url}\n                      dark\n                      onClick={this.onClick}\n                  >\n                    Generate Dockerfile\n                  </Button> */}\n                </div>\n              </div>\n              <div className=\"ms-Grid-col ms-sm6 ms-md8 ms-lg10 h-100\">\n                <Content\n                    savedSteps={savedSteps}\n                    addValue={addValue}\n                    baseDockers={docker}\n                    addSteps={this.addSteps}\n                    delFromDocker={this.delFromDocker}\n                    entrypointSteps={entrypointSteps}\n                    runSteps={runSteps}\n                    content={content}\n                    config={config}\n                    onUpdate={this.onUpdate}\n                    onRest={this.onReset}\n                    onSwitchContent={this.onSwitchContent}\n                />\n              </div>\n          </div>\n        </div>\n        <Alert stack={{ limit: 3 }} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import * as React from 'react';\nimport { render } from 'react-dom';\nimport { initializeIcons } from '@uifabric/icons';\ninitializeIcons()\n\nimport App from './App';\n\nrender(<App />, document.getElementById('content'));\n"],"sourceRoot":""}